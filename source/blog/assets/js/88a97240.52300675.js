"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[1400],{6308:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>p,frontMatter:()=>o,metadata:()=>a,toc:()=>l});var s=t(5893),i=t(1151);const o={title:"ASP.NET Identity - Weakening password policies",tags:["ASP-NET-CORE","ASP-NET-IDENTITY","PASSWORD"],slug:"aspnet-identity-weakening-password-policies"},r="ASP.NET Identity: Weakening password policies",a={permalink:"/blog/aspnet-identity-weakening-password-policies",source:"@site/blog/2018-02-10-aspnet-identity-weakening-password-policies/index.md",title:"ASP.NET Identity - Weakening password policies",description:"This is the second article in a series of articles about ASP.NET Core Identity.",date:"2018-02-10T00:00:00.000Z",formattedDate:"February 10, 2018",tags:[{label:"ASP-NET-CORE",permalink:"/blog/tags/asp-net-core"},{label:"ASP-NET-IDENTITY",permalink:"/blog/tags/asp-net-identity"},{label:"PASSWORD",permalink:"/blog/tags/password"}],readingTime:2.07,hasTruncateMarker:!0,authors:[],frontMatter:{title:"ASP.NET Identity - Weakening password policies",tags:["ASP-NET-CORE","ASP-NET-IDENTITY","PASSWORD"],slug:"aspnet-identity-weakening-password-policies"},unlisted:!1,prevItem:{title:"ASP.NET Identity - Migrating users' passwords from ASP.NET Membership",permalink:"/blog/aspnet-identity-migrate-membership-passwords"},nextItem:{title:"ASP.NET Identity - Use claims to store additional user's data",permalink:"/blog/aspnet-identity-store-user-data-in-claims"}},d={authorsImageUrls:[]},l=[{value:"Problem",id:"problem",level:2},{value:"Solution",id:"solution",level:2}];function c(e){const n={a:"a",code:"code",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:t(3368).Z+"",width:"1280",height:"681"})}),"\n",(0,s.jsxs)(n.p,{children:["This is the second article in a series of articles about ASP.NET Core Identity.\nYou can find the first one ",(0,s.jsx)(n.a,{href:"/blog/add-extra-user-claims-aspnet-core-webapp",children:"here"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"problem",children:"Problem"}),"\n",(0,s.jsxs)(n.p,{children:["Let's suppose you created a new ASP.NET Core with the default Authentication (like in ",(0,s.jsx)(n.a,{href:"/blog/aspnet-identity-store-user-data-in-claims",children:"previous article"}),").\nThen you run it and try to register a new user. On the registration form, we need to enter a password.\nSince we need to register a user for testing purposes first of all - we don't want to make the password too complicated. We'd prefer to keep it simple and easy-to-remember (in the end - it's not a production-mode system!)"]}),"\n",(0,s.jsx)(n.p,{children:'However, if you try to enter something simple like "qwerty" or your name - you will get the following bunch of error messages:'}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Passwords must have at least one non-alphanumeric character."}),"\n",(0,s.jsx)(n.li,{children:"Passwords must have at least one digit ('0'-'9')."}),"\n",(0,s.jsx)(n.li,{children:"Passwords must have at least one uppercase ('A'-'Z')."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"The reason for all these validation errors is that by default ASP.NET Core Identity has very strong password policies for the users. In the error messages above you can see the constraints which must be satisfied."}),"\n",(0,s.jsx)(n.h2,{id:"solution",children:"Solution"}),"\n",(0,s.jsxs)(n.p,{children:["The good news is that you can change these policies very easily, right in ",(0,s.jsx)(n.code,{children:"Configure"})," method of your ",(0,s.jsx)(n.code,{children:"Startup"})," class."]}),"\n",(0,s.jsxs)(n.p,{children:["All you need to do is to use another version of ",(0,s.jsx)(n.code,{children:"AddIdentity"})," method which accepts a lambda expression with ",(0,s.jsx)(n.code,{children:"IdentityOptions"})," parameter.\nSo the following default code that initializes the Identity:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"services.AddIdentity<ApplicationUser, IdentityRole>()\n\t.AddEntityFrameworkStores<ApplicationDbContext>()\n\t.AddDefaultTokenProviders();\n"})}),"\n",(0,s.jsx)(n.p,{children:"should be changed to the something like the following:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"services.AddIdentity<ApplicationUser, IdentityRole>(options => {\n\toptions.Password.RequiredLength = 3;\n\toptions.Password.RequiredUniqueChars = 0;\n\toptions.Password.RequireLowercase = false;\n\toptions.Password.RequireUppercase = false;\n\toptions.Password.RequireDigit = false;\n\toptions.Password.RequireNonAlphanumeric = false;\n})\n.AddEntityFrameworkStores<ApplicationDbContext>()\n.AddDefaultTokenProviders();\n"})}),"\n",(0,s.jsx)(n.p,{children:"The options above are self-descriptive, so no additional explanations are required."}),"\n",(0,s.jsx)(n.p,{children:"Of course, it's not good to leave such kind of password strength policies in production mode. That's why it will be a good idea to turn all those options off only in Development mode."}),"\n",(0,s.jsxs)(n.p,{children:["So, to make it possible we will need to add two more modifications to our ",(0,s.jsx)(n.code,{children:"Startup"})," class:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"public IHostingEnvironment Environment { get; }\n\npublic Startup(IConfiguration configuration, IHostingEnvironment env)\n{\n    Configuration = configuration;\n    Environment = env;\n}\n\npublic void ConfigureServices(IServiceCollection services)\n{\n    .     .     .     .     .     .     .\n    services.AddIdentity<ApplicationUser, IdentityRole>(options => {\n        if (Environment.IsDevelopment()) {\n            options.Password.RequiredLength = 3;\n            options.Password.RequiredUniqueChars = 0;\n            options.Password.RequireLowercase = false;\n            options.Password.RequireUppercase = false;\n            options.Password.RequireDigit = false;\n            options.Password.RequireNonAlphanumeric = false;\n        }\n    })\n    .AddEntityFrameworkStores<ApplicationDbContext>()\n    .AddDefaultTokenProviders();\n   .     .     .     .     .     .     .\n}\n"})})]})}function p(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},3368:(e,n,t)=>{t.d(n,{Z:()=>s});const s=t.p+"assets/images/password-weak-57d9c5b4082153e2d8bc2b5d39b75a01.jpg"},1151:(e,n,t)=>{t.d(n,{Z:()=>a,a:()=>r});var s=t(7294);const i={},o=s.createContext(i);function r(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);