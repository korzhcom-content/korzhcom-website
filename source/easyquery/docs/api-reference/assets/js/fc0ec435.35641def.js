"use strict";(self.webpackChunkeasy_query_docs_docusaurus=self.webpackChunkeasy_query_docs_docusaurus||[]).push([[7923],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>k});var r=a(67294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},l=Object.keys(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var o=r.createContext({}),d=function(e){var t=r.useContext(o),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},u=function(e){var t=d(e.components);return r.createElement(o.Provider,{value:t},e.children)},c="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,l=e.originalType,o=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),c=d(a),m=n,k=c["".concat(o,".").concat(m)]||c[m]||p[m]||l;return a?r.createElement(k,i(i({ref:t},u),{},{components:a})):r.createElement(k,i({ref:t},u))}));function k(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var l=a.length,i=new Array(l);i[0]=m;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s[c]="string"==typeof e?e:n,i[1]=s;for(var d=2;d<l;d++)i[d]=a[d];return r.createElement.apply(null,i)}return r.createElement.apply(null,a)}m.displayName="MDXCreateElement"},54130:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>o,contentTitle:()=>i,default:()=>p,frontMatter:()=>l,metadata:()=>s,toc:()=>d});var r=a(87462),n=(a(67294),a(3905));const l={},i=void 0,s={unversionedId:"korzh-easyquery-services-namespace/defaulteqauthprovider-class",id:"korzh-easyquery-services-namespace/defaulteqauthprovider-class",title:"defaulteqauthprovider-class",description:'The default implementation of the Korzh.EasyQuery.Services.IEqAuthProvider interface.  Contains several methods which allow to mark some EasyQuery actions as "anonymous" (so they can be accessed by any user)  and to restrict the access to them depening on user role.',source:"@site/docs/korzh-easyquery-services-namespace/defaulteqauthprovider-class.md",sourceDirName:"korzh-easyquery-services-namespace",slug:"/korzh-easyquery-services-namespace/defaulteqauthprovider-class",permalink:"/easyquery/docs/api-reference/korzh-easyquery-services-namespace/defaulteqauthprovider-class",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"dbcontextmodelloader-t--class",permalink:"/easyquery/docs/api-reference/korzh-easyquery-services-namespace/dbcontextmodelloader-t--class"},next:{title:"easydbresultset-class",permalink:"/easyquery/docs/api-reference/korzh-easyquery-services-namespace/easydbresultset-class"}},o={},d=[{value:"Constructors",id:"constructors",level:3},{value:"Fields",id:"fields",level:3},{value:"Methods",id:"methods",level:3},{value:"Static Fields",id:"static-fields",level:3}],u={toc:d},c="wrapper";function p(e){let{components:t,...a}=e;return(0,n.kt)(c,(0,r.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"The default implementation of the ",(0,n.kt)("a",{parentName:"p",href:"/korzh-easyquery-services-namespace/ieqauthprovider-interface"},"Korzh.EasyQuery.Services.IEqAuthProvider"),' interface.  Contains several methods which allow to mark some EasyQuery actions as "anonymous" (so they can be accessed by any user)  and to restrict the access to them depening on user role.'),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-csharp"},"public class Korzh.EasyQuery.Services.DefaultEqAuthProvider\n    : IEqAuthProvider\n\n")),(0,n.kt)("p",null,"Assembly: ",(0,n.kt)("inlineCode",{parentName:"p"},"Korzh.EasyQuery.AspNetCore.dll")),(0,n.kt)("h3",{id:"constructors"},"Constructors"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Name"),(0,n.kt)("th",{parentName:"tr",align:null},"Type"),(0,n.kt)("th",{parentName:"tr",align:null},"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"DefaultEqAuthProvider(",(0,n.kt)("inlineCode",{parentName:"td"},"IServiceProvider")," services)"),(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"void")),(0,n.kt)("td",{parentName:"tr",align:null},"Initializes a new instance of the ",(0,n.kt)("a",{parentName:"td",href:"/korzh-easyquery-services-namespace/defaulteqauthprovider-class"},"Korzh.EasyQuery.Services.DefaultEqAuthProvider")," class.")))),(0,n.kt)("h3",{id:"fields"},"Fields"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Name"),(0,n.kt)("th",{parentName:"tr",align:null},"Type"),(0,n.kt)("th",{parentName:"tr",align:null},"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"ActionGuards"),(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"Dictionary"),"<",(0,n.kt)("inlineCode",{parentName:"td"},"string"),", ",(0,n.kt)("inlineCode",{parentName:"td"},"Func"),"<",(0,n.kt)("inlineCode",{parentName:"td"},"CancellationToken"),", ",(0,n.kt)("inlineCode",{parentName:"td"},"Task"),"<",(0,n.kt)("inlineCode",{parentName:"td"},"bool"),">",">",">"),(0,n.kt)("td",{parentName:"tr",align:null},"Contains the dictionary of action guards.  Each EasyQuery action has a function (guard) which return true if this action can be accessed by the current user")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"AuthService"),(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"IAuthorizationService")),(0,n.kt)("td",{parentName:"tr",align:null},"The authorization service for policy")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"User"),(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"ClaimsPrincipal")),(0,n.kt)("td",{parentName:"tr",align:null},"The current user")))),(0,n.kt)("h3",{id:"methods"},"Methods"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Name"),(0,n.kt)("th",{parentName:"tr",align:null},"Type"),(0,n.kt)("th",{parentName:"tr",align:null},"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"AllowAnonymous(",(0,n.kt)("inlineCode",{parentName:"td"},"String[]")," actions)"),(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("a",{parentName:"td",href:"/korzh-easyquery-services-namespace/defaulteqauthprovider-class"},"DefaultEqAuthProvider")),(0,n.kt)("td",{parentName:"tr",align:null},"Sets anonymous access for the actions specified in the parameter.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"FillDefaultActionGuards()"),(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"void")),(0,n.kt)("td",{parentName:"tr",align:null},"Fills the ",(0,n.kt)("a",{parentName:"td",href:"/korzh-easyquery-services-namespace/defaulteqauthprovider-class"},"Korzh.EasyQuery.Services.DefaultEqAuthProvider.ActionGuards"),' list with the default guards.  The default setup includes the following 2 rules:  1. All actions requires authorization.  2. NewQuery, SaveQuery and RemoveQuery actions requires also the "EasyQuery Manager" (',(0,n.kt)("inlineCode",{parentName:"td"},"eqmanager"),") role.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"GetAuthorizedGuard()"),(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"Func"),"<",(0,n.kt)("inlineCode",{parentName:"td"},"CancellationToken"),", ",(0,n.kt)("inlineCode",{parentName:"td"},"Task"),"<",(0,n.kt)("inlineCode",{parentName:"td"},"bool"),">",">"),(0,n.kt)("td",{parentName:"tr",align:null},"Gets the guard functions which returnc ",(0,n.kt)("c",null,"true")," only if the current user is authenticated.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"GetGrantAccessForPolicyGuard(",(0,n.kt)("inlineCode",{parentName:"td"},"string")," policy)"),(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"Func"),"<",(0,n.kt)("inlineCode",{parentName:"td"},"CancellationToken"),", ",(0,n.kt)("inlineCode",{parentName:"td"},"Task"),"<",(0,n.kt)("inlineCode",{parentName:"td"},"bool"),">",">"),(0,n.kt)("td",{parentName:"tr",align:null},"Gets the guard functions which returnc ",(0,n.kt)("c",null,"true")," only if the current user with specified policy.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"GetGrantAccessForRolesGuard(",(0,n.kt)("inlineCode",{parentName:"td"},"String[]")," roles)"),(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"Func"),"<",(0,n.kt)("inlineCode",{parentName:"td"},"CancellationToken"),", ",(0,n.kt)("inlineCode",{parentName:"td"},"Task"),"<",(0,n.kt)("inlineCode",{parentName:"td"},"bool"),">",">"),(0,n.kt)("td",{parentName:"tr",align:null},"Gets the guard functions which grants access only for users with the specifeid roles.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"GrantAccessForRoles(",(0,n.kt)("inlineCode",{parentName:"td"},"string")," action, ",(0,n.kt)("inlineCode",{parentName:"td"},"String[]")," roles)"),(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("a",{parentName:"td",href:"/korzh-easyquery-services-namespace/defaulteqauthprovider-class"},"DefaultEqAuthProvider")),(0,n.kt)("td",{parentName:"tr",align:null},"Grants the access to specified action for one more roles passed in the second parameter.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"IsAuthorizedAsync(",(0,n.kt)("a",{parentName:"td",href:"/korzh-easyquery-services-namespace/easyquerymanager-class"},"EasyQueryManager")," eqManager, ",(0,n.kt)("inlineCode",{parentName:"td"},"string")," action, ",(0,n.kt)("inlineCode",{parentName:"td"},"CancellationToken")," ct = ",(0,n.kt)("span",{style:{color:"blue"}},"null"),")"),(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"Task"),"<",(0,n.kt)("inlineCode",{parentName:"td"},"bool"),">"),(0,n.kt)("td",{parentName:"tr",align:null},"Determines whether the current user can get access to the the specified action.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"RequireAuthorization(",(0,n.kt)("inlineCode",{parentName:"td"},"String[]")," actions)"),(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("a",{parentName:"td",href:"/korzh-easyquery-services-namespace/defaulteqauthprovider-class"},"DefaultEqAuthProvider")),(0,n.kt)("td",{parentName:"tr",align:null},"Sets the restricted access for the specified actions (only authorized users can access them).")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"RequirePolicy(",(0,n.kt)("inlineCode",{parentName:"td"},"string")," policy, ",(0,n.kt)("inlineCode",{parentName:"td"},"String[]")," actions)"),(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("a",{parentName:"td",href:"/korzh-easyquery-services-namespace/defaulteqauthprovider-class"},"DefaultEqAuthProvider")),(0,n.kt)("td",{parentName:"tr",align:null},"Restricts the access to the actions specified in the second parameter by the user policy passed in the first parameter.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"RequireRole(",(0,n.kt)("inlineCode",{parentName:"td"},"string")," role, ",(0,n.kt)("inlineCode",{parentName:"td"},"String[]")," actions)"),(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("a",{parentName:"td",href:"/korzh-easyquery-services-namespace/defaulteqauthprovider-class"},"DefaultEqAuthProvider")),(0,n.kt)("td",{parentName:"tr",align:null},"Restricts the access to the actions specified in the second parameter by the user role passed in the first parameter.")))),(0,n.kt)("h3",{id:"static-fields"},"Static Fields"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Name"),(0,n.kt)("th",{parentName:"tr",align:null},"Type"),(0,n.kt)("th",{parentName:"tr",align:null},"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"EqManagerRole"),(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"string")),(0,n.kt)("td",{parentName:"tr",align:null},'The default ID for "EasyQuery Manager" role  The user with this role can access the actions which modify queries in the storage.')))))}p.isMDXComponent=!0}}]);