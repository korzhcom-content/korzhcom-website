"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[1477],{10:e=>{e.exports=JSON.parse('{"blogPosts":[{"id":"typescript-webpack-aspnetcore","metadata":{"permalink":"/blog/typescript-webpack-aspnetcore","source":"@site/blog/2022-04-19-using-ts-wp-aspnet-core-proj/index.md","title":"Using TypeScript with WebPack in ASP.NET Core projects","description":"Motivation","date":"2022-04-19T00:00:00.000Z","formattedDate":"April 19, 2022","tags":[{"label":"ASP-NET-CORE","permalink":"/blog/tags/asp-net-core"},{"label":"JAVASCRIPT","permalink":"/blog/tags/javascript"},{"label":"TYPESCRIPT","permalink":"/blog/tags/typescript"}],"readingTime":9.21,"hasTruncateMarker":true,"authors":[{"name":"Serhii Korzh","title":"Team Lead & Maintainer of EasyQuery","url":"https://github.com/korzh","imageURL":"https://github.com/korzh.png","key":"korzh"},{"name":"Oleksandr Melnychenko","title":"Maintainer of EasyQuery & Localizer","url":"https://github.com/melnalex","imageURL":"https://github.com/melnalex.png","key":"melnalex"}],"frontMatter":{"title":"Using TypeScript with WebPack in ASP.NET Core projects","tags":["ASP-NET-CORE","JAVASCRIPT","TYPESCRIPT"],"authors":["korzh","melnalex"],"slug":"typescript-webpack-aspnetcore"},"nextItem":{"title":"Single-file web API services with .NET 5 and ASP.NET Core","permalink":"/blog/single-file-web-service-aspnetcore"}},"content":"![](tswebpack-cover.jpg)\\n\\n## Motivation\\n\\nSuppose you work on ASP.NET Core web application that solves some business-related tasks. You know, a few forms where users enter their data and get some reports. Although such a project may not require any complex logic on the client, you still probably need to write some JavaScript code to make user interaction with your application more convenient and enjoyable. For example, you may need a simple prompt popup on item deletion since it\'s not quite right to use a separate page for that. Or, you want to do client-side validation. Or ... it really can be any other client-side task, you name it.\\n\\n\x3c!--truncate--\x3e\\n\\nOf course, you can add a few lines of script on each page (with vanilla JavaScript or using the good old JQuery) but it is really hard to maintain all these small pieces when your project gets bigger. Moreover, some of these pieces do the same things, so you either need to replicate them in many places (bad decision) or you end up creating a small library that contains all client-side functions, structures, and classes used in your project.\\n\\nThis article describes how to create such a JS library for your ASP.NET Core project with minimal effort and in a way that will provide better support for further changes.\\n\\n## Solution\\n\\nLong story short, we are going to put all our client-side code to separate files (with classes, functions, data structures) and then bundle them with the help of WebPack 5. The resulting script can be included right into your _Layout.cshtml (so, it will be available on all pages of your web app) or you can include it only on the pages where it\'s necessary.\\n\\nMoreover, we will use TypeScript instead of pure JavaScript because, you know, static typing is good and it allows us to catch a lot of errors at compile time.\\n\\nIn addition, you can consider this article as a quick introduction to client-side development. Especially if you are a .NET developer who still tends to stay backend-only and who is afraid of all that fancy client-side stuff (as I was some time ago).\\n\\n## Getting started\\n\\nHere we will describe the steps necessary to set up the configuration for bundling a small TypeScript library with your own code. For the sake of simplification, this library will contain just one function for now.\\n\\n### 0. Install Node.JS\\n\\nI\'m pretty much sure you already have it installed. In case you don\'t - please do it. We will need Node.JS version 10.13.0 (or newer) on your dev/build machine.\\n\\n### 1. ClientScript sub-folder\\n\\nWe will put all our scripts and configuration files into a separate sub-folder ClientScript of your main project\'s folder. It\'s similar to ClientApp sub-folder used in most of the SPA (single page application) templates available for ASP.NET Core.\\n\\n### 2. Add configuration files\\n\\nWe will need 3 configuration files:\\n\\n- package.json - to define our bundle and all dependencies,\\n- webpack.config.js - for WebPack configuration\\n- tsconfig.json - for TypeScript settings.\\n\\nFor now, you can just copy these files as-is. We will describe each of them later.\\n\\n```json title=\\"package.json\\"\\n{\\n  \\"name\\": \\"myapp-client-bundle\\",\\n  \\"version\\": \\"1.0.0\\",\\n  \\"description\\": \\"This is client-side scripts bundle for MyApp\\",\\n  \\"private\\": true,\\n  \\"scripts\\": {\\n    \\"build\\": \\"webpack --mode=development\\",\\n    \\"build:prod\\": \\"webpack --mode=production\\"\\n  },\\n  \\"devDependencies\\": {\\n    \\"ts-loader\\": \\"^9.2.5\\",\\n    \\"typescript\\": \\"^4.4.3\\",\\n    \\"webpack\\": \\"^5.52.1\\",\\n    \\"webpack-cli\\": \\"^4.8.0\\"\\n  },\\n  \\"dependencies\\": {\\n  }\\n}\\n```\\n\\n```javascript title=\\"webpack.config.js\\"\\nconst path = require(\'path\');\\n\\nmodule.exports = {\\n  entry: \'./src/index.ts\',\\n  module: {\\n    rules: [\\n      {\\n        test: /\\\\.tsx?$/,\\n        use: \'ts-loader\',\\n        exclude: /node_modules/,\\n      },\\n    ],\\n  },\\n  resolve: {\\n    extensions: [\'.tsx\', \'.ts\', \'.js\'],\\n  },\\n  output: {\\n    library: {\\n      name: \'MYAPP\',\\n      type: \'var\'\\n    },\\n    filename: \'app-client.js\',\\n    path: path.resolve(__dirname, \'../wwwroot/js\'),\\n  }\\n};\\n```\\n\\n```json title=\\"tsconfig.json\\"\\n{\\n  \\"compilerOptions\\": {\\n    \\"outDir\\": \\"./dist/\\",\\n    \\"noImplicitAny\\": true,\\n    \\"module\\": \\"es6\\",\\n    \\"target\\": \\"es5\\",\\n    \\"allowJs\\": true,\\n    \\"moduleResolution\\": \\"node\\"\\n  }\\n}\\n```\\n\\n### 3. Add TypeScript files\\n\\nFor the sake of simplicity, our library in this initial stage will contain only one function hello() that simply prints Hello world to the browser\'s console. Here are two files we need for that outstanding :) functionality:\\n\\n#### hello.ts\\nThis file contains our function packed into the funcs namespace, so we will be able to call it as MYAPP.funcs.hello()\\n\\n```typescript title=\\"hello.ts\\"\\nexport namespace funcs {\\n    export function hello(): void {\\n        const message = \'Hello world!\';\\n        console.log(message);\\n    }\\n}\\n```\\n#### index.ts\\nThis is our entry point. This TypeScript file will not contain any functions or classes. It will just define which parts of our code (functions, interfaces, classes, etc) we are going to expose to the outside world. Since we have only one file with \\"real\\" functionality our index.ts will as simple as:\\n```typescript title=\\"index.ts\\"\\nexport * from \'./hello\';\\n```\\nand it means that we would to \\"reveal\\" all public (exported) parts inside our `hello.ts`\\n\\n### 4. Build your library\\n\\nThat\'s it. We are ready to build our bundle script. To do so, open your terminal program, move to `ClientScript` folder and run the following 2 commands:\\n\\n```shell\\nnpm install\\n```\\nand then\\n```shell\\nnpm run build\\n```\\n\\nThe first one will install all necessary NPM libraries (the ones which are listed in the `dependencies` and `devDependencies` sections of your `package.json`). You will need to run it before the first build and then only when you add a new dependency (another NPM package) to your `package.json`.\\n\\nThe second command actually runs WebPack that compiles (or, to be more correct, \\"transpiles\\") your TypeScript files to JavaScript, then bundles all JS code into one file `app-client.js` and puts that file into `wwwroot/js` folder of your web project as defined in `webpack.config.js` configuration file.\\n\\nAccording to the `output/library` section of that file, all functions or structures of your new bundle will be accessible via the `MYAPP` global variable.\\n\\n### 5. Attach the final script to your app\\nTo use our script you just need to include it on your page as any other JS file:\\n```html\\n<script src=\\"/js/app-client.min.js\\"><\/script>\\n```\\nYou can add that line either to the `_Layout.cshtml` (to make it available on all pages of your web application) or to the view or Razor page where it\'s necessary.\\n\\nNow you can call the function(s) from our new JS library:\\n```html\\n<script>\\nMYAPP.funcs.hello();\\n<\/script>\\n```\\n\\n## Configuring the scope\\n\\nOne of the great features of using TypeScript and WebPack is organizing your code in modules and then combining those modules into namespaces using WebPack\'s configuration and TypeScript\'s `namespace` structure.\\n\\nThere are several possible options.\\n\\n### 1. Use module names and their aliases\\nYou can put functions and classes in a module and export that module either \\"as-is\\" or with an alias.\\n\\nFor example, if we have the following module:\\n```typescript title=\\"dialogs.ts\\"\\nexport class Dialog {\\n    ... \\n}\\n\\nexport function showDialog() { \\n    ...  \\n}\\n```\\nand we use this export declaration in our `index.ts`:\\n```typescript\\nexport * from \'./dialogs\';\\n```\\nthen our `Dialog` class and `showDialog()` function will be available right under `MYAPP` namespace as `MYAPP.Dialog` and `MYAPP.showDialog()`.\\n\\nYou can also specify an alias for that `dialogs` module:\\n```typescript\\nexport * as dlg from \'./dialogs\';\\n```\\nNow our class and the function will be accessible as `MYAPP.dlg.Dialog` and `MYAPP.dlg.showDialog()` correspondingly.\\n\\n### 2. Using namespace clause\\n\\nYou can also use the namespace clause and then re-export the imported modules, so all functions, variables, and types that belong to the same namespace even in different modules will be merged together.\\n\\nFor example, we have the following two modules:\\n\\n```typescript title=\\"dialogs.ts\\"\\nexport namespace ui {\\n    export class Dialog1 {\\n        ... \\n    }\\n\\n    export function showDialog1() {\\n        ...  \\n    }\\n}\\n```\\nand\\n```typescript title=\\"widgets.ts\\"\\nexport namespace ui {\\n  export class Widget1 { ... }\\n\\n  export function renderWidget1() { ... }\\n}\\n```\\nw, if we place the following two lines in our `index.ts` module:\\n```typescript\\nexport * from \'./dialogs\';\\nexport * from \'./widgets\';\\n```\\nwe will be able to access all those exported functions and classes under the `MYAPP.ui` namespace. For example: `MYAPP.ui.renderWidget1()`.\\n\\n## Using third-party libraries\\n\\nMaybe the most significant advantage of this setup (that may seem a little complicated for just a \\"hello world\\" function) is the possibility to use any third-party JS library from hundred of thousands available on NPM repository.\\n\\nAs an example, we slightly modify our `hello()` function so that it will take a parameter `name` and will print the phrase `Hello, {name}` to the console. Before printing, the string stored in the name variable will be capitalized with the help of `capitalize()` function from the well-known `lodash` library.\\n\\nHere are the steps we should take to achieve this goal:\\n\\n### 1. Add lodash library to your package.json\\n\\nJust open a terminal inside your ClientScript folder and type:\\n```shell\\nnpm install lodash\\n```\\nAs the result of this operation, you will see something like the following in the dependencies section of your package.json file:\\n```json\\n\\"dependencies\\": {\\n    \\"lodash\\": \\"^4.17.21\\"\\n}\\n```\\n(the actual version number can be different).\\n\\n### 2. Import lodash functions in your hello.ts file\\n\\nAdd the following line at the beginning of hello.ts:\\n```typescript\\nimport * as _ from \'lodash\';\\n```\\n\\n### 3. Modify hello() function\\n\\nNow we can use all lodash library functions using _ global variable (this is the default way of using lodash functions since the times it was not an NPM library). So, our hello function will look the following:\\n\\n```typescript\\nexport function hello(name : string): void {\\n  const message = \'Hello, \' + _.capitalize(name);\\n  console.log(message);\\n}\\n```\\nAdditionally, we will modify the function call on our page:\\n```html\\n<script>\\nMYAPP.funcs.hello(\'sergiy\');\\n<\/script>\\n```\\nWhen we rebuild our script (npm run build), run the app, and open the main page, we will see the following string in the console panel of our browser:\\n```\\nHello, Sergiy\\n```\\n\\n## Watch mode\\nIt\'s unnecessary to run the build command each time you change something in your script or add a new package to your project. Instead, you can use the watch mode once, and WebPack will re-build your project every time something was changed:\\n\\n```shell\\nnpm run watch\\n```\\n\\n## Conclusions\\n\\nAs we can see, using TypeScript with WebPack to build vanilla JS client-side scripts for your ASP.NET Core projects has a lot of benefits:\\n\\n- Strong-typed TypeScript code with all advantages of the latest JavaScript features: classes, arrow functions, modules, scopes, and promises.\\n- Better support by code editors (like Visual Studio Code) with syntax highlighting, IntelliSense, etc.\\n- A possibility to use 3-party libraries with typing definitions.\\n- More compact and optimized JS 5 code generated by WebPack.\\n- Hot reload of the changes you make in the code editor.\\n- Better debugging experience (I\'m going to write a separate article about it). It\'s possible to debug your original TypeScript code instead of minimized JS code available for your web app.\\n\\nThere is one more note. We used WebPack in this article since it\'s the most popular module bundler for now. However, I believe that we can quickly get the same results with any other bundler like Browserify, Parcel, or Rollup.\\n\\nPlease let me know (via my Twitter account @korzhs or here in the comments) if this article was valuable and informative for you.\\n\\nHappy coding!"},{"id":"single-file-web-service-aspnetcore","metadata":{"permalink":"/blog/single-file-web-service-aspnetcore","source":"@site/blog/2021-04-15-single-file-web-service-aspnetcore/index.md","title":"Single-file web API services with .NET 5 and ASP.NET Core","description":"Introduction","date":"2021-04-15T00:00:00.000Z","formattedDate":"April 15, 2021","tags":[{"label":"ASP-NET-CORE","permalink":"/blog/tags/asp-net-core"},{"label":"WEB-SERVICE","permalink":"/blog/tags/web-service"},{"label":"TOP-LEVEL-STATEMENTS","permalink":"/blog/tags/top-level-statements"}],"readingTime":3.27,"hasTruncateMarker":true,"authors":[{"name":"Serhii Korzh","title":"Team Lead & Maintainer of EasyQuery","url":"https://github.com/korzh","imageURL":"https://github.com/korzh.png","key":"korzh"},{"name":"Oleksandr Melnychenko","title":"Maintainer of EasyQuery & Localizer","url":"https://github.com/melnalex","imageURL":"https://github.com/melnalex.png","key":"melnalex"}],"frontMatter":{"title":"Single-file web API services with .NET 5 and ASP.NET Core","tags":["ASP-NET-CORE","WEB-SERVICE","TOP-LEVEL-STATEMENTS"],"authors":["korzh","melnalex"],"slug":"single-file-web-service-aspnetcore"},"prevItem":{"title":"Using TypeScript with WebPack in ASP.NET Core projects","permalink":"/blog/typescript-webpack-aspnetcore"},"nextItem":{"title":"CRUD operations in ASP.NET Core with EasyData library","permalink":"/blog/crud-asp-net-core-with-easydata"}},"content":"![](simple-webservice.jpg)\\n\\n## Introduction\\n\\nThere are many ways to create a web application today. We have a lot of different platforms, frameworks, and libraries: PHP, Python, Java, NodeJS, and a dozen of others.\\n\\nWhile ASP.NET (Core) was always a good choice for developing enterprise-level web applications (with many complex web pages, some Web API endpoints, static resources, etc.),\\nit\'s never been the best choice for creating a small web service with just a few endpoints to handle REST API requests in JSON or plain text formats.\\n\\nWell, that was true until .NET 5 was released last year. With support for top-level statements and new features in C# language, .NET 5 allows us to create a solid web service in just a few minutes and with a single code file.\\n\\n\x3c!--truncate--\x3e\\n\\n## Single code file ASP.NET Core web service\\n\\nBelow you will find an example of a very basic \\"echo\\" web service with only one endpoint that just takes the content of a POST request and returns it back in JSON format. Not quite a real-world task of course, but enough for demonstration purposes.\\n\\nSo, to create our single-code-file web service just open your terminal, create an empty folder and type the following command:\\n\\n```\\ndotnet new web\\n```\\n\\nThis command will create a simple ASP.NET Core project with two code files: `Program.cs` and `Startup.cs`.\\n\\nSince our purpose is to get only one file, we remove `Startup.cs`. Yeah, it\'s that simple.\\n\\n\\nAfter that just copy/paste the following piece of code into `Program.cs` file:\\n\\n```\\nusing System.IO;\\nusing System.Net.Mime;\\n\\nusing Microsoft.AspNetCore.Builder;\\nusing Microsoft.AspNetCore.Hosting;\\nusing Microsoft.AspNetCore.Http;\\nusing Microsoft.Extensions.Hosting;\\n\\n\\nHost.CreateDefaultBuilder(args)\\n    .ConfigureWebHostDefaults(webBuilder => webBuilder\\n        .Configure(app => app.Run(async context => {\\n            if (context.Request.Path == \\"/api/echo\\" && context.Request.Method == \\"POST\\") {\\n                //getting the content of our POST request\\n                using var reader = new StreamReader(context.Request.Body);\\n                var content = await reader.ReadToEndAsync();\\n\\n                //sending it back in the response\\n                context.Response.ContentType = MediaTypeNames.Text.Plain;\\n                await context.Response.WriteAsync(content);\\n            }\\n            else {\\n                //Return 404 for any other endpoint\\n                context.Response.StatusCode = StatusCodes.Status404NotFound;\\n                await context.Response.WriteAsync($\\"WRONG ENDPOINT: {context.Request.Path.ToString()}. Use POST request to /api/echo instead\\");\\n            }\\n        })))\\n    .Build().Run();\\n```\\n\\nLet\'s take a closer look what happens here.\\n\\n### Top-level statements\\n\\nFist we have a block of `using` statement. That\'s usual for any C# file. Nothing special.\\n\\nAfter that, we start straight with an instruction. We call `CreateDefaultBuilder()` method of `Host` class.\\nIf you\'ve had experience with C# before, you may be a little bit confused by this approach. No namespaces, no class definitions.\\nYou may even say that this piece of code has the wrong syntax and will not be compiled.\\n\\nBut it will. It\'s possible to do now with C# 9 and it\'s called [top-level statements](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/proposals/csharp-9.0/top-level-statements).\\n\\n\\n### Creating a host\\n\\nAs we already mentioned above the only instruction we actually have in our little program is `Host.CreateDefaultBuilder()` call.\\nIt creates a [generic host builder](https://docs.microsoft.com/en-us/aspnet/core/fundamentals/host/generic-host) with default settings for logging, configuration, and Dependency Injection container.\\n\\n### Setting up the web application\\n\\nAfter that, the `ConfigureWebHostDefaults` method loads the configuration, set Kestrel as the webserver, enables IIS integrations, and adds some default middlewares.\\n\\nFinally, we call `Configure` method to set up the [middleware pipeline](https://docs.microsoft.com/en-us/aspnet/core/fundamentals/middleware/), or, to define the only middleware that will actually process all requests to our web service (with that `app.Run(...)` call).\\n\\nThe next piece of code is self-explanatory. If it\'s a POST request to `/api/echo` we read the content of the request\'s body and just write it back to the response stream. Otherwise, we return the 404 code with some error message.\\n\\nAs I mentioned above, this is a very basic example of a microweb service, but I intentionally made it simple to show how everything works in general without going into detail.\\n\\n\\n## Running the app\\n\\nTo run this simple web service just type in the terminal (while you are in the project\'s directory):\\n\\n```\\ndotnet run\\n```\\n\\nHere is what you get in response by sending a POST request to /api/echo using [Postman utility](https://www.postman.com/):\\n\\n![POST request to /api/echo via Postman](postman-echo01.png )"},{"id":"crud-asp-net-core-with-easydata","metadata":{"permalink":"/blog/crud-asp-net-core-with-easydata","source":"@site/blog/2021-03-31-crud-asp-net-core-with-easydata/index.md","title":"CRUD operations in ASP.NET Core with EasyData library","description":"Implementing CRUD operations in your ASP.NET Core application can be a very tedious and time-consuming task.","date":"2021-03-31T00:00:00.000Z","formattedDate":"March 31, 2021","tags":[{"label":"ASP-NET-CORE","permalink":"/blog/tags/asp-net-core"},{"label":"ENTITY-FRAMEWORK","permalink":"/blog/tags/entity-framework"},{"label":"JAVASCRIPT","permalink":"/blog/tags/javascript"},{"label":"CRUD","permalink":"/blog/tags/crud"},{"label":"PAGING","permalink":"/blog/tags/paging"},{"label":"DATA-FILTERING","permalink":"/blog/tags/data-filtering"}],"readingTime":7.13,"hasTruncateMarker":true,"authors":[{"name":"Serhii Korzh","title":"Team Lead & Maintainer of EasyQuery","url":"https://github.com/korzh","imageURL":"https://github.com/korzh.png","key":"korzh"},{"name":"Oleksandr Melnychenko","title":"Maintainer of EasyQuery & Localizer","url":"https://github.com/melnalex","imageURL":"https://github.com/melnalex.png","key":"melnalex"}],"frontMatter":{"title":"CRUD operations in ASP.NET Core with EasyData library","tags":["ASP-NET-CORE","ENTITY-FRAMEWORK","JAVASCRIPT","CRUD","PAGING","DATA-FILTERING"],"authors":["korzh","melnalex"],"slug":"crud-asp-net-core-with-easydata"},"prevItem":{"title":"Single-file web API services with .NET 5 and ASP.NET Core","permalink":"/blog/single-file-web-service-aspnetcore"},"nextItem":{"title":"ASP.NET Core default project structure explained (part 2)","permalink":"/blog/asp-net-core-project-structure-explained-part2"}},"content":"![](db-objects-01.jpg)\\n\\n> Implementing CRUD operations in your ASP.NET Core application can be a very tedious and time-consuming task.\\nEasyData helps to add all necessary functionality (and even more) in a matter of minutes.\\n\\n## Problem\\n\\nOne of the first tasks for most business applications is to implement CRUD (Create, Read, Update, Delete) operations for the main entities the app works with.\\n\\nEvery developer faces the following problems as part of solving the task:\\n\\n* The creation of CRUD pages and forms is very boring and time-consuming. Believe me, I\u2019ve been there a lot of times.\\n\\n* If you do it manually, it can be very slow and error-prone (missed fields, forgotten validators, etc).\\n\\n* Of course, you can use the scaffolding tool provided by Visual Studio.\\n  However, it\u2019s also not a quick process either, because you need to run that tool for each model class.\\n  As a result, you get many .cs and .cshtml files, which you\'ll have to edit manually if something in the default behavior or appearance doesn\'t suit your needs.\\n  In the event of changes in the model classes, you\'ll need to update those generated controllers and pages manually\\n  or regenerate the code and forms from scratch for each affected model class.\\n\\n* Moreover, even the built-in scaffolding doesn\'t provide some important, often essential functions such as paging or search.\\n\\n\x3c!--truncate--\x3e\\n\\n## Solution: EasyData library\\n\\nTo solve most (if not all) of those problems we created the [EasyData library](https://github.com/KorzhCom/EasyData).\\nThe main advantage of EasyData is that it employs a declarative approach.\\n\\nThe whole process can be split into two main steps:\\n\\n1. You \u201cdescribe\u201d what data (entities and attributes) you want to work with and\\n   how your application should work with that data (types, constraints, relations between entities, etc).\\n\\n2. Based on this information, the EasyData library establishes an API endpoint for CRUD operations and a vanilla JavaScript-based UI\\n   that lets your users perform those operations via the API.\\n\\nThe most wonderful thing here is that when using Entity Framework Core,\\nall you need for the first step (\u201cdescribing\u201d the data) is your DbContext.\\nSimply \u201cfeed\u201d it to the library, and EasyData automatically extracts all the information needed to create the API endpoints and CRUD UI.\\n\\n## Quick demo\\n\\nHere\'s a small introduction video that shows how EasyData works:\\n\\n![EasyData quick demo](easydata-demo01.gif \\"EasyData quick demo\\")\\n\\n## Getting Started\\n\\nFirst of all, to test EasyData you can open and run one of the [sample projects](https://github.com/korzh/EasyData/tree/master/samples) available in this repository.\\n\\nInstalling EasyData to your project takes the following three simple steps:\\n\\n### 1. Install EasyData NuGet packages\\n\\n* EasyData.AspNetCore\\n* EasyData.EntityFrameworkCore.Relational\\n\\n### 2. Add EasyData middleware in `Startup.Configure`\\n\\n```c#\\nusing EasyData.Services;\\n.    .    .    .    .\\n\\n    app.UseEndpoints(endpoints =>\\n    {\\n        endpoints.MapEasyData(options => {\\n            options.UseDbContext<AppDbContext>();\\n        });\\n\\n        endpoints.MapRazorPages();\\n    });\\n\\n```\\n\\nIn the middleware options, we also specify the type of DbContext object that will be used as the source of the metadata.\\n\\n### 3. Set up a catch-all page for all CRUD operations\\n\\nIf you\'re using Razor Pages, add a new page (for example `EasyData.chstml`). If it\u2019s MVC, you\'ll need a controller and a view.\\nThis page will \\"catch\\" all URLs that begin with a certain prefix (`/easydata` by default but it\'s configurable). So, we use a special catch-all parameter in the route definition (`\\"/easydata/{**entity}\\"`).\\n\\nWe also add EasyData styles and the script file (`easydata.min.js`), which renders the data-management UI and handles all CRUD operations on the client-side.\\n\\n```\\n@page \\"/easydata/{**entity}\\"\\n@{\\n    ViewData[\\"Title\\"] = \\"EasyData\\";\\n}\\n<link rel=\\"stylesheet\\" href=\\"https://cdn.korzh.com/ed/1.2.2/easydata.min.css\\" />\\n\\n<div id=\\"EasyDataContainer\\"></div>\\n\\n@section Scripts {\\n    <script src=\\"https://cdn.korzh.com/ed/1.2.2/easydata.min.js\\" type=\\"text/javascript\\"><\/script>\\n    <script>\\n        window.addEventListener(\'load\', function () {\\n            new easydata.crud.EasyDataViewDispatcher().run()\\n        });\\n    <\/script>\\n}\\n```\\n\\nThat\u2019s it. Now you can run your web app, open the `/easydata` URL and enjoy CRUD functionality.\\n\\nThe result will be something like this:\\n\\n#### List view screen for one entity:\\n\\n![List view screen for Orders entity](easydata-sshot01.jpg)\\n\\n#### \\"Edit Record\\" dialog:\\n\\n![Edit Record dialog](easydata-sshot02.jpg)\\n\\n#### \\"Lookup\\" dialog (was opened from \\"Edit Record\\"):\\n\\n![Lookup dialog](easydata-sshot03.jpg)\\n\\n\\n## How it works\\n\\nLet\'s briefly go over how all this magic works.\\nAs we mentioned before EasyData takes care of three main things:\\n\\n* It collects database metadata.\\n\\n* It establishes an API for the main CRUD operations.\\n\\n* It renders UI (again, based on the metadata) and processes all user interactions in that UI.\\n\\nLet\u2019s explore all these parts in detail.\\n\\n### Metadata\\n\\nMetadata is the data about your data: what entities (tables) are stored in your database,\\nhow they\'re connected, what attributes (fields) they have, what  the types of attributes are\\nand what the constraints are with respect to the values we can store in those attributes.\\n\\nEasyData collects metadata (in one way or another) and stores it in the instance of `MetaData` class.\\nThis object contains the list of entities (tables), the attributes (fields) for each entity, the connections between entities,\\nand some additional information used in API and during UI rendering and processing.\\n\\nTo fill the MetaData object, we specify a metadata loader. In the example above, we did it with the UseDbContext call.\\nSo, the metadata is loaded from a DbConext object. Currently (in version 1.2) this is the only metadata loader available.\\nIn future versions, it will be possible to load metadata directly from a DbConnection object or perhaps with some other method.\\n\\n### EasyData middleware\\n\\nEasyData middleware is responsible for establishing a REST API for all CRUD (and not only) operations initiated by the client side.\\n\\nTo add the middleware to your pipeline use `MapEasyData` extension function inside `UseEndpoints` configuration delegate:\\n\\n```\\n   app.UseEndpoints(endpoints =>\\n    {\\n       endpoints.MapEasyData(options => {\\n            options.UseDbContext<AppDbContext>();\\n        });\\n    }\\n```\\n\\nThis call should be made before `MapMvc` or `MapRazorPages`.\\nBy default, EasyData middleware is assigned to `/api/easydata endpoint`, but you can change it via the configuration function (action) passed in the parameter.\\n\\nThe only thing that\'s required in order to configure for `MapEasyData` is to tell it where to take the metadata.\\nCurrently, there\'s just one option available: getting metadata from a DbContext.\\nSo, that\u2019s why we add `UseDbContext<AppDbContext>()` call in the example above.\\nBesides getting metadata, `UseDbContext` also provides our middleware with all the means for performing CRUD operations (via the DbContext object).\\n\\n### EasyData UI root page\\n\\nThe third part of the EasyData setup process is the page where the CRUD user interface is rendered.\\nIt must be a so-called \\"catch-all\\" Razor page or MVC view.\\nBy default, this page must be opened for any path that starts with the `/easydata/` prefix.\\n(So, all paths like `/easydata/student` or `/easydata/invoice` must be processed by this page.)\\n\\nNB: `/easydata` is the default prefix.\\nYou can use another name, but in this case, it will be necessary to specify it in the options of our `RootDispatcherView` object.\\n\\nOur catch-all page can contain any HTML element of your choice.\\nHowever, to ensure the visualization and normal operation of the CRUD UI, it must include the following 4 elements:\\n\\n* `<link>` element with a reference to EasyData CSS file (`easydata.min.cs`)\\n\\n* Container (empty `div` element), in which our interface will be displayed.\\n  By default, it must have the ID `EasyDataContainer`, but this can also be configured with options.\\n\\n* `<script>` element with a reference to `easydata.min.js`.\\n\\n* And a small script that creates and launches the `EasyDataViewDispatcher` object on page load.\\n\\nAn example of the simplest \u201ccatch-all\u201d page you can see in the Getting Started section above.\\n\\n## Wrapping up\\n\\nCurrently, EasyData can work with .NET Core 3.1 and .NET 5.\\nObviously, all ASP.NET Core and Entity Framework Core versions that can work with the specified releases of .NET (Core) are supported.\\nHowever, it won\'t be a problem to add support for previous versions of .NET Core or even .NET Framework 4.x.\\nIf anyone needs it, please [submit an issue](https://github.com/KorzhCom/EasyData/issues) in EasyData\'s GitHub repository.\\n\\nEasyData can be a good tool with which to quickly prototype a new project or create a POC (proof of concept)\\nwhen we already understand what data we\'ll need but don\'t want to spend a lot of time on the simplest operations with that data.\\nHowever, we hope that in time it will be possible to fully use this solution in the production environment.\\n\\n\\nSo, we look forward to hearing from you with any comments or advice you may have. Of course, don\'t forget to ad a start for the EasyData repository on GitHub, especially if this library helped you and saved some time.\\n\\nSo, we look forward to hearing from you with any comments or advice you may have.\\nOf course, don\'t forget to add a star for the [EasyData repository on GitHub](https://github.com/KorzhCom/EasyData),\\nespecially if this library helped you and saved some time."},{"id":"asp-net-core-project-structure-explained-part2","metadata":{"permalink":"/blog/asp-net-core-project-structure-explained-part2","source":"@site/blog/2020-08-10-asp-net-core-project-structure-explained-part2/index.md","title":"ASP.NET Core default project structure explained (part 2)","description":"This is the second part of the article, where we take apart the default ASP.NET Core solution template piece by piece and try to explain the purpose of each part and how exactly it works. You can consider it as a reference where you can check why a particular part was added to your project and find a link to the relevant documentation that explains it in detail.","date":"2020-08-10T00:00:00.000Z","formattedDate":"August 10, 2020","tags":[{"label":"ASP-NET-CORE","permalink":"/blog/tags/asp-net-core"},{"label":"PROJECT-TEMPLATE","permalink":"/blog/tags/project-template"}],"readingTime":10.075,"hasTruncateMarker":true,"authors":[{"name":"Serhii Korzh","title":"Team Lead & Maintainer of EasyQuery","url":"https://github.com/korzh","imageURL":"https://github.com/korzh.png","key":"korzh"},{"name":"Oleksandr Melnychenko","title":"Maintainer of EasyQuery & Localizer","url":"https://github.com/melnalex","imageURL":"https://github.com/melnalex.png","key":"melnalex"}],"frontMatter":{"title":"ASP.NET Core default project structure explained (part 2)","tags":["ASP-NET-CORE","PROJECT-TEMPLATE"],"authors":["korzh","melnalex"],"slug":"asp-net-core-project-structure-explained-part2"},"prevItem":{"title":"CRUD operations in ASP.NET Core with EasyData library","permalink":"/blog/crud-asp-net-core-with-easydata"},"nextItem":{"title":".NET vs. Java - Which Platform Is Better for Your Software Developer Career?","permalink":"/blog/dotnet-vs-java-what-development-platform-better"}},"content":"![](computer-coffee-02.jpg)\\n\\n> This is the second part of the article, where we take apart the default ASP.NET Core solution template piece by piece and try to explain the purpose of each part and how exactly it works. You can consider it as a reference where you can check why a particular part was added to your project and find a link to the relevant documentation that explains it in detail.\\n\\n## Startup class\\n\\nAs we already mentioned in the first article, the Startup class is the entry point for all initialization codes in your application.\\nLong story short, the Startup defines what your application will do and how exactly it will work.\\n\\n\x3c!--truncate--\x3e\\n\\nBy default, any Startup class in the ASP.NET Core application includes three main parts:\\n\\n* __The constructor__ where you can define some internal variables, set up some configuration settings, or perform application-wide initializations. For example, we suggest our users set here their license keys for our EasyQuery library.\\n\\n* __ConfigureServices__ method. Here we register all necessary services in the DI (dependency injection) container and define the configuration settings for some of them. In case you are not aware of what Dependency Injection is, here is an article on our blog that explains this concept in simple words.\\n\\n* __Configure__ method. This is the stage when you set up the middleware pipeline for your project.\\n\\nBoth `ConfigureServices` and `Configure` methods are called automatically while the application starts. You just need to define the services and the middlewares there correspondingly.\\n\\nNow, let\u2019s take a look at each of these sections more in detail.\\n\\n### Startup class constructor\\n\\nThe default ASP.NET Core project template contains only the following one line of code in the constructor:\\n\\n```\\n        public Startup(IConfiguration configuration)\\n        {\\n            Configuration = configuration;\\n        }\\n```\\n\\nIt just saves in the class property the [configuration object](https://docs.microsoft.com/en-us/aspnet/core/fundamentals/configuration/?view=aspnetcore-3.1)\\npassed here by the DI container, so we can use it in other methods.\\nIn the [first article](https://korzh.com/blog/asp-net-core-project-structure-explained-part1),\\nwe have already considered the configuration mechanism used in ASP.NET Core applications.\\n\\n### ConfigureServices method\\n\\nAs it was mentioned before, the `ConfigureServices` method contains the function calls that register different application services in the DI container.\\nThese can be authentication/authorization services, MVC or Razor Pages engine, the classes for working with DB, or any other possible services.\\n\\nThe only parameter of the `ConfigureServices` method has `IServiceCollection` type that represents a list of `ServiceDescriptor` items.\\nEach of those items maps some type (usually an interface) to a particular implementation of this type.\\n\\nAccording to the interface, we can use only usual `IList` or `ICollection` functions like `Add`, `AddRange`, `Remove`, and other methods.\\nHowever, as you have already noticed, `ConfigureServices` contains such calls as `services.AddDbContext`, `services.AddRazorPages`, and similar.\\nYou may ask, \u201cHow is it possible?\u201d The answer is __extension methods__. Each sub-system used in our project (like Entity Framework Core or MVC engine) defines an extension method (sometimes even a few) for the `IServiceCollection` interface to simplify the registration in the DI and configuration of the services available in that sub-system.\\n\\n__NB__: Please note that the order of the services you register in the `ConfigureServices` method is not important.\\nThis method is executed only once upon your application start.\\n\\nSo, let\'s take a closer look at the default ConfigureServices\u2019 content.\\n\\n```\\npublic void ConfigureServices(IServiceCollection services)\\n{\\n    services.AddDbContext<ApplicationDbContext>(options =>\\n        options.UseSqlServer(\\n            Configuration.GetConnectionString(\\"DefaultConnection\\")));\\n    services.AddDefaultIdentity<IdentityUser>(options => options.SignIn.RequireConfirmedAccount = true)\\n        .AddEntityFrameworkStores<ApplicationDbContext>();\\n    services.AddRazorPages();\\n}\\n```\\n\\nSo, there are only three calls there: `AddDbContext`, `AddDefaultIdentity`, and `AddRazorPages`. Let\u2019s inspect each of them separately.\\n\\n#### AddDbContext\\n\\nThis method is provided by the [Entity Framework Core](https://docs.microsoft.com/en-us/ef/core/) framework. It registers and configures our database context. The `Action`delegate passed in the parameter allows us to define the parameters of this DbContext. For example, with `UseSqlServer` call, we tell our DbContext to use a particular type of connection (`SqlConnection`) with a particular connection string. The connection string itself is taken from the configuration so it can be easily changed in Development or Production environments. You can find the default connection string in the `appsettings.json` configuration file, which we already analyzed in the [first article](https://korzh.com/blog/asp-net-core-project-structure-explained-part1).\\n\\n##### A few words about the \u201cBuilder\u201d pattern\\n\\nYou may have noticed an interesting way of passing settings for DbContext.\\nInstead of sending an object with options, we use a procedure (Action) with one-parameter options of the DbContextOptionsBuilder type.\\n\\nThat\'s because, to construct the DbContext settings properly, Entity Framework Core uses the __Builder Pattern__.\\nThis pattern is helpful when you need to perform several steps to construct some complex objects and simply defining a class or structure is not enough. For example, when you need to call some methods depending on the settings in the configuration.\\nAs it happens in our case with `UseSqlServer()`.\\n\\nThere is one more reason why we use a delegate (function) instead of a plain object.\\nThere may be a situation when you don\'t need that service (DbContext) at all.\\nFor example, your web app has some actions that do not require database access.\\nThe DbContext object will never be created for such requests, and so, we will not need to set its options.\\nThe good thing about a delegate is that it can be called exactly when you need to construct the necessary object.\\n\\nI paid so much attention to this pattern because it is used quite often,\\nespecially in the process of registering services in DI (and we will use that for the next function call as well).\\n\\n#### AddDefaultIdentity\\n\\nThe second function call in the ConfigureServices was added here because of the Authentication option we turned on when creating our project.\\nIt registers a bunch of services for authentication and authorization tasks such as `IUserStore`, `IRoleStore`, `IPasswordHasher`, `UserManager`, `SignInManager`, and many others.\\nThe are all part of the ASP.NET Core Identity sub-system.\\n\\nThis method also uses the Builder Pattern, but in a slightly different way. Instead of passing the builder in the delegate\u2019s parameter, this function returns an IdentityBuilder object, so you can call other functions with simple chaining.\\n\\nThe only function called there is `AddEntityFrameworkStores`.\\nIt tells ASP.NET Identity where to store all the entities required for auth tasks (users, roles, claims, etc.).\\nAs the name of the method suggests, we will use our Entity Framework services for these tasks.\\nThe type of parameter in this method (between `< .. >`) defines the `DbContext` class used to store all auth objects.\\n\\n### AddRazorPages\\n\\nThe last function call in the `ConfigureServices` adds the services necessary for Razor Pages engine.\\nIt appears here because of the template we chose at the beginning.\\nIf we had selected a template with Model-View-Controller approach at that point, we would have had something like `services.AddMvc()` here.\\n\\n## Configure method\\n\\nThe last method in the Startup class defines the middleware pipeline of our ASP.NET Core program.\\nIf you don\'t know what a middleware pipeline is, you might want to learn more about it because it determines how your web application handles HTTP requests.\\n\\n![ASP.NET Core middleware pipeline](aspnetcore-middleware-pipeline.png)\\n\\nUnlike the services registered in `ConfigureServices` (remember, their order is not important), the order of middlewares defined in `Configure` has crucial significance. As you can see from the picture above, the first defined middleware is called for each request while every next one in the pipeline processes only those requests that were not processed by the middlewares defined before it.\\n\\nSo at the beginning of the pipeline, we need to place the middlewares that are necessary for auxiliary tasks (like logging or authentication) and that don\u2019t consume a lot of memory and processing time.\\n\\nLet\u2019s take a look at the default implementation of this method for the chosen project template:\\n\\n```\\n        public void Configure(IApplicationBuilder app, IWebHostEnvironment env)\\n        {\\n            if (env.IsDevelopment()) {\\n                app.UseDeveloperExceptionPage();\\n                app.UseDatabaseErrorPage();\\n            }\\n            else {\\n                app.UseExceptionHandler(\\"/Error\\");\\n                app.UseHsts();\\n            }\\n\\n            app.UseHttpsRedirection();\\n            app.UseStaticFiles();\\n\\n            app.UseRouting();\\n\\n            app.UseAuthentication();\\n            app.UseAuthorization();\\n\\n            app.UseEndpoints(endpoints => {\\n                endpoints.MapRazorPages();\\n            });\\n        }\\n```\\n\\nSo, let\u2019s go through the middlewares defined here one by one.\\n\\n#### Exception handling and security transport\\n\\nThe first lines define different middlewares for Development and Production modes.\\nIf we are in the Development mode, we define the middlewares that catch all exceptions in the pipeline\\nand show a special page with extra information about the error (exception message, stack trace, etc.).\\n\\nIt\'s possible to do because (as you can see from the image above) the processing of the request is returned to the first middleware\\nin the pipeline before being sent back to the client.\\n\\nIn the Production mode, we also catch all exceptions and then re-execute the request with the specified path (\u2018/Error\u2019 in our case).\\n\\nThe second call executed only in Production is `UseHsts`. It adds a middleware that implements HTTP Strict Transport Security Protocol.\\n\\nThe next in the pipeline is HTTPS redirection middleware (`app.UseHttpsRedirection`).\\nThe name is self-explanatory. It just redirects all HTTP requests to HTTPS ones.\\nThese two middlewares (`app.UseHsts` and `app.UseHttpsRedirection` calls) are added because of the __Configure for HTTPS__ option we turned on (actually, it was turned on by default) during the project creation.\\n\\n#### Processing static files (UseStaticFiles)\\n\\nThe next middleware (added by the `app.UseStaticFiles()` call) takes care of all static files.\\nSimply put, if the application gets a request for some .js, .css, or an image file (.png, .jpg, etc.),\\nthis middleware looks for a file with the requested name inside `wwwroot` folder and returns it in response (if the file was found).\\nIf not, it sends back a response with a 404 status code (\u201cnot found\u201d).\\n\\nThere are overloads of `UseStaticFiles` that allow us to define another root folder for static files and set some other options.\\n\\n#### Routing (UseRouting and UseEndpoints)\\n\\nThe next pair of middlewares are, maybe, the most important ones in the pipeline, since they define the routing for all other endpoints in your web app.\\n\\nIn simple words, they match a particular request to a particular endpoint, a piece of executable code that handles the request.\\n\\nSo, how exactly does it work?\\n\\nIn the `Configure` method, we call `app.UseRouting()` to add `EndpointRoutingMiddleware` to our pipeline.\\n\\nAfter that, we call `app.UseEndpoints()` to add `EndpointMiddleware` to the pipeline and define the endpoints. Each endpoint is an object that contains (as mentioned above) a delegate (so, a piece of code) that actually handles the request, plus some metadata (like an authorization policy).\\n\\nWe can use such extension methods as `MapGet`, `MapPost`, and others to add an endpoint that matches a particular request path or a path template. For example, the following pattern `/something/{path*}`, will be matched for all requests started with `/something/`.\\n\\nAdditionally, other services can define their own extension functions that are used to create necessary endpoints. For example, you can use the `MapRazorPages` function for Razor Pages or `MapHub` for SingleR. In our [EasyData library](https://github.com/KorzhCom/EasyData) we defined `MapEasyData` function that adds an endpoint for the API that processes all CRUD operations.\\n\\nWhen our web app gets a new request (and it\u2019s not processed by any middleware defined before `UseRouting`), the `EndpointRoutingMiddleware` matches it to some endpoint. So, one endpoint among all defined at the application start is becoming selected at that moment.\\n\\nThen `EndpointMiddleware` actually calls the endpoint\u2019s delegate to handle the request.\\nOther middlewares that are added after `app.UseRouting()` but before `app.UseEnpoints()` can see which endpoint is selected\\nand can change something (e.g., to apply an authorization policy) before `EndpointMiddleware` dispatches to the selected endpoint.\\n\\n\\n#### Authentication/Authorization (UseAuthentication, UseAuthorization)\\n\\nThese two middlewares are added in the `Configure` because of the Authentication option we turned on when we created our project.\\nAs already mentioned above, they already know which endpoint is selected and so can add some additional identity-related information to the request\u2019s context (like filling its `User` property) or redirect to the \u201csign-in/sign up\u201d pages if the current request is anonymous but the selected endpoint requires authorization.\\n\\n## Wrapping Up\\n\\nSo, in this article, I tried to cover all pieces of one of the most-used ASP.NET Core application templates and figure out why they are used and how they work (from a very general point of view).\\n\\nI hope this information will help you better understand the internal mechanism of the ASP.NET Core framework and make your code more clear and efficient.\\n\\nThanks for the reading, and take care!"},{"id":"dotnet-vs-java-what-development-platform-better","metadata":{"permalink":"/blog/dotnet-vs-java-what-development-platform-better","source":"@site/blog/2020-05-01-dotnet-vs-java-what-development-platform-better/index.md","title":".NET vs. Java - Which Platform Is Better for Your Software Developer Career?","description":"Choosing a framework is not easy when you start reflecting on your future as a software developer, especially if you are a newbie.","date":"2020-05-01T00:00:00.000Z","formattedDate":"May 1, 2020","tags":[{"label":"NET","permalink":"/blog/tags/net"},{"label":"JAVA","permalink":"/blog/tags/java"},{"label":"PROGRAMMING","permalink":"/blog/tags/programming"}],"readingTime":8.25,"hasTruncateMarker":true,"authors":[{"name":"Serhii Korzh","title":"Team Lead & Maintainer of EasyQuery","url":"https://github.com/korzh","imageURL":"https://github.com/korzh.png","key":"korzh"},{"name":"Oleksandr Melnychenko","title":"Maintainer of EasyQuery & Localizer","url":"https://github.com/melnalex","imageURL":"https://github.com/melnalex.png","key":"melnalex"}],"frontMatter":{"title":".NET vs. Java - Which Platform Is Better for Your Software Developer Career?","tags":["NET","JAVA","PROGRAMMING"],"authors":["korzh","melnalex"],"slug":"dotnet-vs-java-what-development-platform-better"},"prevItem":{"title":"ASP.NET Core default project structure explained (part 2)","permalink":"/blog/asp-net-core-project-structure-explained-part2"},"nextItem":{"title":"Dependency Injection Put Simply","permalink":"/blog/dependency-injection-explanation-in-simple-words"}},"content":"![](dotnet-vs-java.png)\\n\\nChoosing a framework is not easy when you start reflecting on your future as a software developer, especially if you are a newbie.\\nMastering any programming language takes long hours and an effort you don\u2019t want to waste.\\nAnd it\u2019s stressful to think that the wrong option might lead you to a job where you will have to change your knowledge base again.\\n\\nOk, let\u2019s switch to the positive side.\\nSince you are here, your options are narrowed down to these two: Java or .NET.\\nThat\u2019s already a huge move forward.\\nBoth options are already a kind of win.\\nJava and .NET are both well-established and are used for enterprise-level development.\\nThat means you might land a job at a huge company with lots of resources and opportunities.\\n\\n\x3c!--truncate--\x3e\\n\\nLet\u2019s take a quick look at the job market.\\nAs of April 2020, Monster.com lists more than 41k jobs for \u201cJava Developer\u201d and 8.5k for \u201c.NET Developer.\u201d\\nAccording to Glassdoor, the average salary estimation for a Java developer (irrespective of level and location) is about USD 79k and USD 76.5k for an ASP.NET/C# developer.\\n\\nDon\u2019t be too fast with the conclusions though.\\nNext, you might want to know which of the two is better for you personally and is more relevant to the future of technologies.\\nLet\u2019s have a closer look at both options.\\n\\n\\n## Old-school Java\\n\\nAt the moment, Java is one of the most popular technologies worldwide.\\nIt often ranks first in various ratings, and this is probably the main reason developers stick to it. The technology was created in 1995.\\n\\nIt is relatively easy to learn, and there are many free training resources available.\\nIn addition, there is an enormous community that can help a newbie through the learning process.\\nJava is suitable for almost every type of project: web applications, mobile apps, cloud computing, etc.\\n\\n![Applications of Java](applications-of-java.png)\\n\\nJava is a free technology, as is the Oracle JDK (Java Development Kit), or Oracle OpenJDK, that\u2019s used to create software in Java.\\nIt also makes it possible to work with other programming languages, such as Kotlin, Groovy, or Scala, which would be relatively easy to learn as an addition. And as we have just pointed out, the job market is full of offers for Java developers from all over the planet. Sound good?\\n\\nBut hold on \u2014 there is a slippery slope under any ideal image. Some downsides include:\\n\\n### Licesing mess\\n\\nMaybe you think that you will start your way in Java by writing a small \\"Hello World\\" program, right? Wrong.\\nToday, before you actually can learn Java itself, you first need to understand licensing on this platform.\\nOtherwise, you may appear in a situation when you at first have to pay Oracle a couple of thousands of dollars for the licensing before delivering your work to the customer.\\nTherefore, first, carefully study what Oracle JDK is and how it differs from Oracle Open JDK.\\nAnd how they both differ from the community-led AdoptOpenJDK.\\nWhat is Binary Code License and how much rights you have with [GPLv2+CPE license](http://openjdk.java.net/legal/gplv2+ce.html).\\nSeveral official FAQs seem to explain the situation with licensing (one on [Oracle\u2019s site](https://www.oracle.com/technetwork/java/javase/overview/oracle-jdk-faqs.html)\\nand another one on [Java.com](https://java.com/en/download/faq/distribution.xml)) but make it even more confusing.\\nIn addition, you can easily find a bunch of blog posts, queries on Quora (like \\"Is Java still free\\"), and even videos on this topic.\\n\\nThe question is: do you really want to deal with all this?\\n\\n\\n### Legacy code\\n\\nMany long-standing companies have something written in Java.\\nEventually, a young and passionate Java learner might end up on a job where they are working with an obsolete code instead of some new and prominent technology.\\nFor example, a library a company has been accumulating for 20 odd years might be too expensive and time-consuming to modernize.\\n\\n\\n### High competition\\n\\nIn addition to the huge number of vacancies, there\u2019s an even bigger number of candidates.\\nThat\u2019s because virtually everyone who studies all the ratings sees Java in the top positions \u2014 and here we go!\\nAnother thousand newbie learners opt for Java.\\n\\n\\n## A More Promising Option: the .NET Framework\\n\\nThere is another very popular free open-source developer platform that can serve you better \u2014 .NET. Here is why it may be more promising for you.\\n\\n![.NET 5 platform overview](dotnet5_platform.png)\\n\\nSource: https://devblogs.microsoft.com/dotnet/introducing-net-5/\\n\\n### 1. Free, open, and cross-platform\\n\\nInterestingly enough, about five to six years ago all the features mentioned in the previous section would have made Java a better option,\\nas .NET was then fully controlled by Microsoft and ran only on Windows.\\n\\n__This situation has completely changed in the last few years.__\\n\\nThe tables have turned, and now Java is becoming more closed off under Oracle guidance, while the approach of Microsoft is quite the opposite.\\n.NET now is an [open-source platform with no licensing costs](https://dotnet.microsoft.com/platform/free).\\nThey claim freedom for developers as one of the platform\u2019s core values.\\nFor the time being, Microsoft seems to practice what they preach.\\n\\nThe latest version of the .NET platform \u2014 .NET Core \u2014 is compatible with all the major operating systems: Windows, Linux, and iOS. There are basic .NET tools open for immediate use and lots of add-ons for building and editing apps, as well as third-party tools. Multiple libraries built specifically for .NET make the development process even more comfortable.\\n\\n\\n### 2. All application types\\n\\nThe .NET framework (and its Core edition in particular) allow you to develop almost any kind of application,\\nbe it an enterprise-level web app, desktop or mobile software, gaming project, or even an IoT service or an AI solution.\\n\\n\\nWith the advent of the WebAssembly technology and [Blazor framework](https://dotnet.microsoft.com/apps/aspnet/web-apps/blazor),\\n.NET can be used even for building client-side applications running in a browser \u2014 web apps where both client and server-side code is written in C#, thus eliminating the need to use JavaScript.\\n\\n![.NET 5 application models](dotnet-application-models.png)\\n\\nSource: https://dotnet.microsoft.com/learn/dotnet/what-is-dotnet\\n\\n\\n### 3. Quick progress and regular updates\\n\\nThe .NET framework has been constantly evolving throughout its 20-year history.\\nBut in the last four to five years, the pace of its progress has increased significantly.\\n\\nSince the initial release of .NET Core back in 2016, we have received a major update almost once per year.\\n\\nIn November 2020 Microsoft plans to release another big update to the platform \u2014 .NET 5.\\nIt is supposed to take the best of the previous versions and become a united platform for all the development tasks.\\nMoreover, at its annual conference in 2019 Microsoft introduced [a roadmap for the .NET platform](https://medium.com/capgemini-dynamics-365-team/future-of-net-net-5-microsoft-build-2019-from-a-net-developer-point-of-view-7a1158fb0691)\\nthat gives a clear understanding of what to expect and when.\\n\\n![.NET Schedule](dotnet_schedule.png)\\n\\nSource: https://devblogs.microsoft.com/dotnet/introducing-net-5/\\n\\n\\n### 4. Great performance\\n\\nFor years, the applications created either with Java or on .NET/C# had a similar level of performance.\\nHowever, Microsoft and many third-party contributers have made some significant investments in the optimization of this aspect and continues to improve.\\nFor example, the ASP.NET Core web framework allows you to serve [7 million requests per second on a single server](https://www.ageofascent.com/2019/02/04/asp-net-core-saturating-10gbe-at-7-million-requests-per-second/).\\nAnd according to [TechEmpower tests](https://www.techempower.com/benchmarks/#section=data-r18&hw=ph&test=json), ASP.NET Core is way ahead of any Java web framework.\\n\\nHere\'s another good demonstration of the performance that can be achieved on the .NET platform \u2014\\n[an example of a super-fast network driver written in different languages](https://github.com/ixy-languages/ixy-languages).\\nThe driver written in C# shows almost the same level of performance as C and Rust, slightly better than the Go language, and way ahead of all other high-level languages, including Java.\\n\\n### 5. C# \u2014 modern and versatile\\n\\n.NET was initially designed to support many programming languages.\\nThe most widely employed among them are C# (pronounced \u201csee sharp\u201d) and F# (which offers a more functional approach).\\n\\nThe most popular and loved is definitely C# \u2014 a general-purpose and object-oriented programming language.\\nIt is easy to learn and is widely used for all kinds of software development, from enterprise-level solutions to low-level IoT and gaming projects.\\nIt makes simple many features that are overly complicated in Java.\\n\\nDespite its long history, C# keeps up with the times.\\nA lot of features, such as LINQ queries, lambda expressions, asynchronous operations with async/await, and others were introduced in C# way ahead of other programming languages. Java still doesn\u2019t have many features that were available in C# for years.\\n\\n## .NET Limitations\\n\\nJust like we said about Java, there is always a downside to any ideal picture.\\nWith .NET, it is still not good enough for the client-side development.\\nJavaScript is still considered the best option.\\nThe same goes for the ML (Machine Learning) and NLP (Natural Language Processing) applications. Here Python is number one.\\n\\n\\n## Wrap Up\\n\\nThe choice between Java and .NET is one between two solid enterprise-level development options.\\nThough Java now ranks number one in all the ratings, it is highly competitive in terms of the job market and slow in terms of relevant updates.\\n\\nThe other option \u2014 .NET \u2014 is an open-source object-oriented solution that can be used for developing all sorts of applications, and it has a clear roadmap for the future.\\nIn 2020 there will emerge .NET 5, an update that will unite all the best features of the previous .NET versions.\\nThis makes learning a well-structured, easy, and modern technology even more attractive.\\n\\n### Useful links:\\n\\n* Looking for a job as a .NET developer? <br />\\n  Use [Jooble](https://jooble.org/jobs-.net-developer) to post your CV and start getting job offers.\\n\\n* Need to implement CRUD (create, read, update, delete) operations in your ASP.NET Core project and don\'t know where to start? <br />\\n  [EasyData open-source library](https://github.com/KorzhCom/EasyData) to the rescue! With EasyData you can get full CRUD functionality in just 10 minutes and with just a few lines of code.\\n\\n* What to improve the user experience of your DB-related .NET application? <br />\\n  [EasyQuery framework](https://korzh.com/easyquery?utm_source=blog&utm_medium=content&utm_campaign=net_vs_java) can help you to implement custom search, data-filtering, reporting, data exporting (to CSV, Excel, PDF), and many other tasks that commonly arise in data management solutions."},{"id":"dependency-injection-explanation-in-simple-words","metadata":{"permalink":"/blog/dependency-injection-explanation-in-simple-words","source":"@site/blog/2020-01-08-dependency-injection-explanation-in-simple-words/index.md","title":"Dependency Injection Put Simply","description":"The concept of Dependency Injection can look over complicated especially for beginners.","date":"2020-01-08T00:00:00.000Z","formattedDate":"January 8, 2020","tags":[{"label":"PROGRAMMING","permalink":"/blog/tags/programming"},{"label":"DEPENDENCY-INJECTION","permalink":"/blog/tags/dependency-injection"}],"readingTime":4.435,"hasTruncateMarker":true,"authors":[{"name":"Serhii Korzh","title":"Team Lead & Maintainer of EasyQuery","url":"https://github.com/korzh","imageURL":"https://github.com/korzh.png","key":"korzh"},{"name":"Oleksandr Melnychenko","title":"Maintainer of EasyQuery & Localizer","url":"https://github.com/melnalex","imageURL":"https://github.com/melnalex.png","key":"melnalex"}],"frontMatter":{"title":"Dependency Injection Put Simply","tags":["PROGRAMMING","DEPENDENCY-INJECTION"],"authors":["korzh","melnalex"],"slug":"dependency-injection-explanation-in-simple-words"},"prevItem":{"title":".NET vs. Java - Which Platform Is Better for Your Software Developer Career?","permalink":"/blog/dotnet-vs-java-what-development-platform-better"},"nextItem":{"title":"Add extra user claims in ASP.NET Core webapp","permalink":"/blog/add-extra-user-claims-aspnet-core-webapp"}},"content":"![](dependency-injection-food-app.png)\\n\\nThe concept of Dependency Injection can look over complicated especially for beginners.\\nHere, I have tried to explain it by using a very simple example from the real world: a food delivery app on your mobile phone.\\n\\nSo, imagine you open such an app on your smartphone. Let\u2019s see what we have here:\\n\\n\x3c!--truncate--\x3e\\n\\n## Menu (interfaces)\\n\\n![DI concepts: intefaces are like items in a cafe menu](di-interfaces-as-menu.png)\\n\\nPhoto by <a href=\\"https://unsplash.com/@elizagalevi23?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText\\">Levi Elizaga</a> on <a href=\\"https://unsplash.com/s/photos/menu?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText\\">Unsplash</a>\\n\\nObviously, this app has a menu with a description of each item available there. To make it more similar to the Dependency Injection (DI) container let\u2019s suppose all items on the menu are more or less generic. So, you have such options as a burger, chips, green salad, a soda drink, coffee, etc. However, you don\u2019t know what meat is used for that burger, how exactly those chips are cooked, and what is the exact soda drink you will get.\\nThese menu items are your __interfaces__. They describe the main characteristics of each snack but don\u2019t bother you with the exact implementation.\\n\\n## Actual snacks (implementations)\\n\\nThen, you have the actual snacks which are delivered to you when you place an order. These are the __implementations__ of your interfaces.\\nObviously, the implementations can differ depending on which particular restaurant they are delivered from.\\n\\n## Delivery (injection)\\n\\nNow, let\u2019s suppose that your app, in some magical way, has a zero-time delivery function (OK, almost zero-time).\\nSo, at whatever place you are now (whatever part of your project), you select the items you need, press the \u201cOrder\u201d button, and the chosen snacks instantly appear in your hands.\\nWe can say that they are __injected__ to the place where you are now :)\\nMoreover, if a snack (like breakfast or combo-meal) depends on other snacks, those dependant snacks are created automatically and also \u201cinjected\u201d into your combo-meal.\\nFor example, a Big Mac Combo Meal includes a BigMac burger, some fries, and a drink. You don\u2019t need to order them separately. They will all be created and delivered to you automatically.\\n\\n## Providers\\n\\nNow let\u2019s suppose you can choose which restaurant will deliver your snacks.\\nYou can choose either it will be a McDonald\u2019s or Burger King or your favorite cafe nearby.\\n\\nMoreover, you can also choose the type of food (with meat, fish only, vegetarian, kosher, etc).\\nSo, now you can still order a burger but if you selected \u201cvegetarian\u201d,\\nour magical app will deliver to you a burger with soy meat or a burger made from that cultured meat popular nowadays.\\n\\nThe main point here is this: with this app, you can easily change the actual provider (so, the implementation)\\nof your snacks without changing the simplicity and convenience of the whole process.\\n\\n## Wrapping up\\n\\n![Dependency Injection Schema](dependency-injection-schema.png)\\n\\nYour food delivery app here is a __Dependency Injection (DI) Container__. The menu items are __interfaces__ of the services you might need somewhere in your project.\\nThe actual snacks are the __implementations__ (actual classes that implement those services).\\nWhen you need your some snacks (__services__) you tell your app (__DI container__) what you need and they are delivered (__injected__ in the place you are now) to you immediately.\\n\\nYou may ask, why DI does matter? What is so special about this concept that has made it so popular?\\n\\nAs you can see from this real-word example, dependency injection has a lot of benefits.\\nLet\u2019s list the most important ones (again, with a real-world example for each of them):\\n\\n1.  __Simplicity__    \\n    With DI, you don\u2019t need to write a lot of code just to create an object of a particular class.\\n    Especially when this object requires several other objects for its work (like a combo-meal in our example).\\n    You just \u201ctell\u201d your DI container (your food delivery app) what you need and it\u2019s delivered to you right away.\\n\\n2. __Maintainability__    \\n   n terms of code, your classes become loosely coupled (each of the classes is less dependent on the concrete implementations of other classes),\\n   so your code will be easier to maintain.\\n   In terms of our food delivery app, it\u2019s easier to maintain one app and order (inject) necessary snacks,\\n   instead of thinking where to buy all the ingredients for each of them and then cook everything yourself.\\n\\n3. __Flexibility__    \\n   With DI, your code becomes loosely coupled and so, more flexible, since you depend on interfaces and it\u2019s very easy to replace the implementation.\\n   For example, you have a repository interface for storing data about users.\\n   The initial implementation of this repository will save the data to files. After that, you can decide to use the database.\\n   The implementation of the repository is changed but all the code that uses it remains the same.    \\n   It\u2019s similar to how you switch the provider of the snacks (or the preferred type of food) in your app. The process of order and delivery remains the same, you just start getting other snacks.\\n\\n## Conclusions\\n\\nAs you can see, Dependency Injection is a very useful and convenient technique,\\nthe main principles of which can be applied not only in coding but in some real-world situations.\\nIn terms of programming, you get more maintainable, more readable, more flexible, and more extensible code.\\nThese are good enough reasons to get better acquainted with this technology and start using it in your projects."},{"id":"add-extra-user-claims-aspnet-core-webapp","metadata":{"permalink":"/blog/add-extra-user-claims-aspnet-core-webapp","source":"@site/blog/2019-05-07-add-extra-user-claims-aspnet-core-webapp/index.md","title":"Add extra user claims in ASP.NET Core webapp","description":"Introduction","date":"2019-05-07T00:00:00.000Z","formattedDate":"May 7, 2019","tags":[{"label":"ASP-NET-CORE","permalink":"/blog/tags/asp-net-core"},{"label":"ASP-NET-IDENTITY","permalink":"/blog/tags/asp-net-identity"},{"label":"CLAIMS","permalink":"/blog/tags/claims"}],"readingTime":6.56,"hasTruncateMarker":true,"authors":[{"name":"Serhii Korzh","title":"Team Lead & Maintainer of EasyQuery","url":"https://github.com/korzh","imageURL":"https://github.com/korzh.png","key":"korzh"},{"name":"Oleksandr Melnychenko","title":"Maintainer of EasyQuery & Localizer","url":"https://github.com/melnalex","imageURL":"https://github.com/melnalex.png","key":"melnalex"}],"frontMatter":{"title":"Add extra user claims in ASP.NET Core webapp","tags":["ASP-NET-CORE","ASP-NET-IDENTITY","CLAIMS"],"authors":["korzh","melnalex"],"slug":"add-extra-user-claims-aspnet-core-webapp"},"prevItem":{"title":"Dependency Injection Put Simply","permalink":"/blog/dependency-injection-explanation-in-simple-words"},"nextItem":{"title":"Using embedded resources in testing projects","permalink":"/blog/embedded-resources-testing-projects"}},"content":"![](1_VrvS6Ky3clwfsf4llZMKnw.png)\\n\\n## Introduction\\n\\nThis is a second edition of the [previous post on the same topic]({{ \'ancid01\' | internal_path }}). The reason why I wrote this one is because of some drastic changes made in ASP.NET Core Authentication system from version 2.0 to version 2.2 - so most of the code presented in the first article doesn\'t work with the new version.\\n\\nSo, the code in the following articles was built for and tested with ASP.NET Core 2.2. The main concept, however, is still the same and were not changed since ASP.NET Identity 2.0 (I guess).\\n\\nAs in the previous case, we will start with a description of the problem.\\n\\n\x3c!--truncate--\x3e\\n\\n## Problem\\n\\nLet\'s suppose we created a new ASP.NET Core project using one of the default templates and chose \\"Individual user account\\" option for \\"Authentication\\".\\n\\n![ASP.NET Identity new project](anc22-add-extra-claim01.png \\"ASP.NET Core - new webapp project with an authentication\\")\\n\\nNow when we start that newly created project and register new user we will see something like `Hello YourEmailAddress@YourCompany.com` in the top right part of the index web-page.\\n\\nObviously, such kind of greeting is useless in a real-world application and you would like to see the name of the currently logged user there instead (e.g. `Hello John Doe`).  \\nLet\'s figure out how to do it.\\n\\n## Solution\\n\\nHere we guess you are already familiar with the claims and [claims-based approach](https://docs.microsoft.com/en-us/aspnet/core/security/authorization/claims) for authorization used in ASP.NET Core Identity. If not - please read [ASP.NET Core Security](https://docs.microsoft.com/en-us/aspnet/core/security/) article first.\\n\\nTo achieve our goal we need to do 2 things:\\n\\n1. Add necessary information to the list of the claims attached to the user\'s identity.\\n2. Have a simple way of getting that info when needed.\\n\\nBut before implementing these two tasks we will need to add a new ContactName field to our model class and update our registration and user management pages accordingly.\\n\\n## Step 0: Preparations\\n\\nBefore we can add a new claim to a user object (the one you can access via `HttpContext.User`) we need a place to store that additional info somewhere.\\nHere I am going to describe how to get this done for a new ASP.NET Core project built by a default template.\\n\\nIf already you work with your real-world application - you most probably already did similar changes before.\\nIn this case, you can skip this section and move right to the step #1.\\n\\n### 0.1 New ApplicationUser class\\n\\nAdd a new  `ApplicationUser` class with `ContactName\' property:\\n\\n```c#\\n    public class ApplicationUser : IdentityUser\\n    {\\n        public string ContactName { get; set; }\\n    }\\n```\\n\\nOf course, you can add more properties to store some additional information with the user account.\\nFor example: `FirstName`, `LastName`, `Country`, `Address`, etc. All of them can be placed to claims the same way as `ContactName` we discuss here.\\n\\n### 0.2 Replace `IdentityUser` with `ApplicationUser`\\n\\nNow you need to replace `IdentityUser` with `ApplicationUser` everywhere in your project.\\n\\nThe default ASP.NET Core template uses predefined `IdentityUser` type everywhere.\\nSince we what to use `ApplicationUser` instead of it - we need to search for all inclusions of `IdentityUser` in your project and replace with `ApplicationUser`.\\n\\nIt will include your DbContext class, one line in `Startup` class (in `ConfigureServices` method) and two lines with `@inject` directives in `_LoginPartial.cshtml` view.\\n\\nHere is how your new `ApplicationDbContext` class will look like after that:\\n\\n```c#\\npublic class ApplicationDbContext : IdentityDbContext<ApplicationUser, IdentityRole, string>\\n{\\n    public ApplicationDbContext(DbContextOptions<ApplicationDbContext> options)\\n        : base(options)\\n    {\\n    }\\n}\\n```\\n\\n### 0.3. Update your database.\\n\\nNow you need to add a new migration and then update your DB.\\nJust run the following 2 commands from your project\'s folder:\\n\\n```powershell\\ndotnet ef migrations add AddUserContactName\\n\\ndotnet ef database update\\n```\\n\\n### 0.4. Update \\"User Profile\\" page\\n\\nFinally, we will need to add our new field to the \\"User Profile\\" page to make it possible for users to modify it.\\n\\nThe default ASP.NET Core template uses all identity-related pages directly from a special Razor UI library (`Microsoft.AspNetCore.Identity.UI`).\\nThe good news is: we can override any of those pages if we want. Here are the steps we need to do:\\n\\n1. Right-click on your project in VS and select Add | New Scaffolding item.\\n\\n2. In the \\"Add Scaffold\\" dialog select `Identity` on the left side tree and then `Identity` in the main list and click \\"Add\\".\\n\\n3. In the dialog that appears select only `Account\\\\Manage\\\\Index` page and then click on \\"Add\\" as well.\\n   When the process is finished you will find a new page \'Index.cshtml\' in `Areas/Identity/Pages` folder.\\n\\n4. After that make the following changes to that `Index` page:\\n\\nIn the Index.cshtml itself add the following piece of markup right before `update-profile-button` button.\\n\\n```html\\n<div class=\\"form-group\\">\\n    <label asp-for=\\"Input.ContactName\\"></label>\\n    <input asp-for=\\"Input.ContactName\\" class=\\"form-control\\" />\\n    <span asp-validation-for=\\"Input.ContactName\\" class=\\"text-danger\\"></span>\\n</div>\\n```\\n\\nThen, in the code-behind file `Index.cshtml.cs` we need to modify the view model:\\n\\n```c#\\npublic class InputModel\\n{\\n    .   .   .   .   .   .\\n\\n    public string ContactName { get; set; }\\n}\\n```\\n\\nthen the `OnGetAsync` method:\\n\\n```c#\\npublic async Task<IActionResult> OnGetAsync()\\n{\\n    .   .   .   .   .   .\\n\\t\\n    Input = new InputModel\\n\\t{\\n\\t\\tEmail = email,\\n\\t\\tPhoneNumber = phoneNumber,\\n\\t\\tContactName = user.ContactName //add this line\\n\\t};\\n\\n    .   .   .   .   .   .\\n\\t\\n}\\n```\\n\\nand the `OnPutAsync`:\\n\\n```c#\\npublic async Task<IActionResult> OnPostAsync()\\n{\\n    .    .    .    .    .    .    .\\n\\n\\tif (Input.ContactName != user.ContactName) {\\n\\t\\tuser.ContactName = Input.ContactName;\\n\\t\\tawait _userManager.UpdateAsync(user);\\n\\t}\\n\\n\\tawait _signInManager.RefreshSignInAsync(user);\\n\\tStatusMessage = \\"Your profile has been updated\\";\\n\\treturn RedirectToPage();\\n}\\n```\\n\\nSo, after all the changes described above your User Profile page after that registration will look like this:\\n\\n![User Profile form with ContactName field](anc22-add-extra-claim02.png \\"User Profile form with ContactName field\\")\\n\\nNow, all the preparations are finished we can return back to our main task.\\n\\n\\n## Step 1: Adding the contact name to the claims\\nA funny thing: the main task is much easier than all the preparations we made before. :)\\nMoreover, it became even easier because of some changes in version 2.2 of ASP.NET Core (in comparison with version 2.0 as [we described before]({{ \'blog~__rt-md5b505xps82~_aspnet-identity-store-user-data-in-claims\' | internal_path }}) )\\n\\nThere are only two simple steps:\\n\\n### Create your own \\"claims principal\\" factory\\n\\nWe need an implementation `IUserClaimsPrincipalFactory` which will add necessary information (`ContactName` in our case) to the user claims.\\nThe simplest way to do it - is to derive our new class from the default implementation of `IUserClaimsPrincipalFactory` and override one method: `GenerateClaimsAsync`:\\n\\n```c#\\npublic class MyUserClaimsPrincipalFactory : UserClaimsPrincipalFactory<ApplicationUser>\\n{\\n    public MyUserClaimsPrincipalFactory(\\n        UserManager<ApplicationUser> userManager,\\n        IOptions<IdentityOptions> optionsAccessor)\\n        : base(userManager, optionsAccessor)\\n    {\\n    }\\n\\n    protected override async Task<ClaimsIdentity> GenerateClaimsAsync(ApplicationUser user)\\n    {\\n        var identity = await base.GenerateClaimsAsync(user);\\n        identity.AddClaim(new Claim(\\"ContactName\\", user.ContactName ?? \\"[Click to edit profile]\\"));\\n        return identity;\\n    }\\n}\\n```\\n\\n### Register new class in DI container\\n\\nThen we need to register our new class in the dependency injection container.\\nThe best way for that - to use `AddClaimsPrincipalFactory` extension method:\\n\\n```c#\\npublic void ConfigureServices(IServiceCollection services) \\n{\\n    .     .     .     .      .\\n    services.AddDefaultIdentity<ApplicationUser>()\\n        .AddDefaultUI(UIFramework.Bootstrap4)\\n        .AddEntityFrameworkStores<ApplicationDbContext>()\\n        .AddClaimsPrincipalFactory<MyUserClaimsPrincipalFactory>();  //<---- add this line\\n}\\n```\\n\\n## Step 2: Accessing new claim from the views\\n\\nNow we have a new claim associated with our user\'s identity. That\'s fine. But how we can get it and render on our view(s)?\\nEasy. Any view in your application has access to `User` object which is an instance of `ClaimsPrincipal` class.\\n\\nThis object actually holds the list of all claims associated with the current user and you can call its `FindFirst` method to get the necessary claim and then read the `Value` property of that claim.\\n\\nSo, we just need to open `_LoginPartical.cshtml` file in `Pages/Shared/` (or `Views/Shared/`) folder and replace the following line:\\n\\n```html\\n<a asp-area=\\"\\" asp-controller=\\"Manage\\" asp-action=\\"Index\\" title=\\"Manage\\">Hello @User.Identity.Name!</a>\\n```\\n\\nwith this one:\\n\\n```html\\n<a asp-area=\\"\\" asp-controller=\\"Manage\\" asp-action=\\"Index\\" title=\\"Manage\\">Hello @(User.FindFirst(\\"ContactName\\").Value)!</a>\\n```\\n\\nNow, instead of something like `Hello john.doe@yourcompany.com` at the top of your web-page you should see something like this:\\n\\n![ASP.NET Identity contact name](anc22-add-extra-claim03.png \\"ASP.NET Core - showing user\'s contact name instead of email\\")\\n\\nThat\'s all for now. Enjoy!"},{"id":"embedded-resources-testing-projects","metadata":{"permalink":"/blog/embedded-resources-testing-projects","source":"@site/blog/2018-05-30-embedded-resources-testing-projects/index.md","title":"Using embedded resources in testing projects","description":"Quite often when you are writing tests it\'s necessary to store some data together with the testing project to make them available in the test functions.","date":"2018-05-30T00:00:00.000Z","formattedDate":"May 30, 2018","tags":[{"label":"UNIT-TESTING","permalink":"/blog/tags/unit-testing"},{"label":"INTEGRATION-TESTS","permalink":"/blog/tags/integration-tests"},{"label":"RESOURCES","permalink":"/blog/tags/resources"}],"readingTime":1.55,"hasTruncateMarker":true,"authors":[{"name":"Serhii Korzh","title":"Team Lead & Maintainer of EasyQuery","url":"https://github.com/korzh","imageURL":"https://github.com/korzh.png","key":"korzh"},{"name":"Oleksandr Melnychenko","title":"Maintainer of EasyQuery & Localizer","url":"https://github.com/melnalex","imageURL":"https://github.com/melnalex.png","key":"melnalex"}],"frontMatter":{"title":"Using embedded resources in testing projects","tags":["UNIT-TESTING","INTEGRATION-TESTS","RESOURCES"],"authors":["korzh","melnalex"],"slug":"embedded-resources-testing-projects"},"prevItem":{"title":"Add extra user claims in ASP.NET Core webapp","permalink":"/blog/add-extra-user-claims-aspnet-core-webapp"},"nextItem":{"title":"ASP.NET Identity - Adding master password","permalink":"/blog/aspnet-identity-master-password"}},"content":"![](cubes-677092_1280.png)\\n\\nQuite often when you are writing tests it\'s necessary to store some data together with the testing project to make them available in the test functions.\\n\\n\x3c!--truncate--\x3e\\n\\nThe solution is quite simple:\\n\\n1. You put necessary files to some folder of your testing project (e.g. `Resources`)\\n\\n2. Mark them as \\"Embedded Resource\\"\\n\\n3. After that, you can access any of these resources in any place of your testing module.\\n\\nHere is an example of a resource file included in your testing project:\\n![an embedded resource file](https://korzh.com/static/blogs/net-tricks/vs-project-embres.png)\\n\\n\\nHere is a static class with extension functions which may help you on step #3:\\n\\n```\\npublic static class ResourceUtils\\n{\\n\\tpublic static Stream GetResourceStream(this Assembly assembly, string resourceFolder, string resourceFileName) \\n\\t{\\n\\t\\t \\n\\t\\tstring[] nameParts = assembly.FullName.Split(\',\');\\n\\t\\t\\t\\n\\t\\tstring resourceName = nameParts[0] + \\".\\" +  resourceFolder + \\".\\" + resourceFileName;\\n\\n\\t\\tvar resources = new List<string>(assembly.GetManifestResourceNames());\\n\\t\\tif (resources.Contains(resourceName))\\n\\t\\t\\treturn assembly.GetManifestResourceStream(resourceName);\\n\\t\\telse\\n\\t\\t\\treturn null;\\n\\t}\\n\\n\\tpublic static string GetResourceAsString(this Assembly assembly, string folder, string fileName) \\n\\t{\\n\\t\\tstring fileContent;\\n\\t\\tusing (StreamReader sr = new StreamReader(GetResourceStream(assembly, folder, fileName))) {\\n\\t\\t\\tfileContent = sr.ReadToEnd();\\n\\t\\t}\\n\\t\\treturn fileContent;\\n\\t}\\n\\t\\n\\tpublic static Stream GetResourceStream(this Type type, string resourceFolder, string resourceFileName) \\n\\t{\\n\\t\\tvar assembly = type.GetTypeInfo().Assembly;\\n\\t\\treturn assembly.GetResourceStream(resourceFolder, resourceFileName);\\n\\t}\\n\\t\\n\\tpublic static string GetResourceAsString(this Type type, string folder, string fileName) \\n\\t{\\n\\t\\tvar assembly = type.GetTypeInfo().Assembly;\\n\\t\\treturn assembly.GetResourceAsString(folder, fileName);\\n\\t}\\t\\n}\\n\\npublic class ResourceUtilsException : Exception {\\n\\tpublic ResourceUtilsException(string message) : base(message) { }\\n}\\n```\\n\\nTo make it even simpler - we put these and some other functions to a [Nuget package](https://www.nuget.org/packages/Korzh.Utils/) you can reference in your project.\\n\\nFinally, here is how your testing function will access the resource file defined on the first step:\\n\\n```\\n[TestMethod]\\npublic void TestMethod1() {\\n\\tstring xml = typeof(UnitTest1).GetResourceAsString(\\"Resources\\", \\"XMLFile1.xml\\");\\n\\t.    .    .    .    .    .\\n}\\n```\\n(here, for the `typeof` function parameter you use any class from the same assembly where your resources are placed)\\n\\nEnjoy!"},{"id":"aspnet-identity-master-password","metadata":{"permalink":"/blog/aspnet-identity-master-password","source":"@site/blog/2018-04-08-aspnet-identity-master-password/index.md","title":"ASP.NET Identity - Adding master password","description":"Problem","date":"2018-04-08T00:00:00.000Z","formattedDate":"April 8, 2018","tags":[{"label":"ASP-NET-CORE","permalink":"/blog/tags/asp-net-core"},{"label":"ASP-NET-IDENTITY","permalink":"/blog/tags/asp-net-identity"},{"label":"PASSWORD-HASHER","permalink":"/blog/tags/password-hasher"}],"readingTime":0.805,"hasTruncateMarker":true,"authors":[{"name":"Serhii Korzh","title":"Team Lead & Maintainer of EasyQuery","url":"https://github.com/korzh","imageURL":"https://github.com/korzh.png","key":"korzh"},{"name":"Oleksandr Melnychenko","title":"Maintainer of EasyQuery & Localizer","url":"https://github.com/melnalex","imageURL":"https://github.com/melnalex.png","key":"melnalex"}],"frontMatter":{"title":"ASP.NET Identity - Adding master password","tags":["ASP-NET-CORE","ASP-NET-IDENTITY","PASSWORD-HASHER"],"authors":["korzh","melnalex"],"slug":"aspnet-identity-master-password"},"prevItem":{"title":"Using embedded resources in testing projects","permalink":"/blog/embedded-resources-testing-projects"},"nextItem":{"title":"ASP.NET Identity - Migrating users\' passwords from ASP.NET Membership","permalink":"/blog/aspnet-identity-migrate-membership-passwords"}},"content":"![](password-master.jpg)\\n\\n## Problem\\n\\nSometimes, when you build a multi-tenant web-application you may need to set up a \\"master password\\" to your system - the password which allows some administrator to login to any user\'s account. Something similar to `su` command in Unix/Linux systems.\\n\\n\x3c!--truncate--\x3e\\n\\n## Solution\\n\\nAs with the [previous task]({{ \'ancid03\' | internal_path }}), the solution is quite simple - thanks to the power and flexibility of ASP.NET Core application architecture.\\n\\nWe just need to create a new implementation of `IPassowrdHasher` interface and register it in dependency injection container:\\n\\n\\n```c#\\n//PasswordHasherWithMasterPassword.cs\\n.   .   .   .   .   .\\npublic class PasswordHasherWithMasterPassword : IPasswordHasher<ApplicationUser>\\t\\n{\\n\\tprivate IPasswordHasher<ApplicationUser> _identityPasswordHasher = new PasswordHasher<ApplicationUser>();\\n\\n\\tprivate static string _masterPassword = \\"qwerty12345\\";\\n\\n    public PasswordVerificationResult VerifyHashedPassword(ApplicationUser user, string hashedPassword, string providedPassword) {\\n\\t\\tif (providedPassword == _masterPassword) {\\n\\t\\t\\t\\treturn PasswordVerificationResult.Success;\\n\\t\\t}\\n\\t\\t\\n        return _identityPasswordHasher.VerifyHashedPassword(user, hashedPassword, providedPassword);\\n\\t}\\n}\\n\\n\\n//Startup.cs\\n.   .   .   .   .   .\\npublic void ConfigureServices(IServiceCollection services)\\n{\\n    .   .   .   .   .   .\\n \\n    services.AddSingleton<IPasswordHasher<ApplicationUser>, PasswordHasherWithMasterPassword>();\\n}\\n```"},{"id":"aspnet-identity-migrate-membership-passwords","metadata":{"permalink":"/blog/aspnet-identity-migrate-membership-passwords","source":"@site/blog/2018-02-22-aspnet-identity-migrate-membership-passwords/index.md","title":"ASP.NET Identity - Migrating users\' passwords from ASP.NET Membership","description":"This is a third part of the series of articles about some not-so-well-known features and tricks in ASP.NET Identity.","date":"2018-02-22T00:00:00.000Z","formattedDate":"February 22, 2018","tags":[{"label":"ASP-NET-CORE","permalink":"/blog/tags/asp-net-core"},{"label":"ASP-NET-IDENTITY","permalink":"/blog/tags/asp-net-identity"},{"label":"ASP-NET_MEMBERSHIP","permalink":"/blog/tags/asp-net-membership"}],"readingTime":1.9,"hasTruncateMarker":true,"authors":[{"name":"Serhii Korzh","title":"Team Lead & Maintainer of EasyQuery","url":"https://github.com/korzh","imageURL":"https://github.com/korzh.png","key":"korzh"},{"name":"Oleksandr Melnychenko","title":"Maintainer of EasyQuery & Localizer","url":"https://github.com/melnalex","imageURL":"https://github.com/melnalex.png","key":"melnalex"}],"frontMatter":{"title":"ASP.NET Identity - Migrating users\' passwords from ASP.NET Membership","tags":["ASP-NET-CORE","ASP-NET-IDENTITY","ASP-NET_MEMBERSHIP"],"authors":["korzh","melnalex"],"slug":"aspnet-identity-migrate-membership-passwords"},"prevItem":{"title":"ASP.NET Identity - Adding master password","permalink":"/blog/aspnet-identity-master-password"},"nextItem":{"title":"ASP.NET Identity - Weakening password policies","permalink":"/blog/aspnet-identity-weakening-password-policies"}},"content":"![](user-data-migrate.png)\\n\\nThis is a third part of the series of articles about some not-so-well-known features and tricks in ASP.NET Identity.\\nHere are you can find the [first]({{ \'ancid05\' | internal_path }}) and the [second]({{ \'ancid02\' | internal_path }}) parts.\\n\\n## Problem\\n\\nThis task usually appears when you need to transfer your old MVC web application to ASP.NET Core. If you use MVC version 3 or 4 and your application provides a user authentication service, then most likely this part is done with the old ASP.NET Membership library.\\n\\nSo, imagine you have a bunch of users, each of them has some password and the hash of that password stored in some database. Now you need to transfer all your current users to the new system built with ASP.NET Core.\\nOf course, it\'s not a big problem to transfer their names, addresses, and other information. The problem is in those password hashes. ASP.NET Core Identity uses another hashing algorithm so all current users will not be able to access the system with their old passwords - the hashes will not match.\\n\\n\x3c!--truncate--\x3e\\n\\n## Solution\\nThe solution is rather simple: we need to rewrite the default hashing service in ASP.NET Core Identity and make it \\"understand\\" both the old and new hashes.\\n\\nHere is our class which implements IPassowrdHasher interface:\\n\\n```c#\\npublic class PasswordHasherWithOldMembershipSupport : IPasswordHasher<ApplicationUser>\\n{\\n\\t//an instance of the default password hasher\\n\\tIPasswordHasher<ApplicationUser> _identityPasswordHasher = new PasswordHasher<ApplicationUser>();\\n\\n\\t//Hashes the password using old algorithm from the days of ASP.NET Membership\\n\\tinternal static string HashPasswordInOldFormat(string password) \\n\\t{\\n\\t\\tvar sha1 = new SHA1CryptoServiceProvider();\\n\\t\\tvar data = Encoding.ASCII.GetBytes(password);\\n\\t\\tvar sha1data = sha1.ComputeHash(data);\\n\\t\\treturn Convert.ToBase64String(sha1data);\\n\\t}\\n\\n\\t//the passwords of the new users will be hashed with new algorithm\\n\\tpublic string HashPassword(ApplicationUser user, string password) {\\n\\t\\treturn _identityPasswordHasher.HashPassword(user, password);\\n\\t}\\n\\n\\tpublic PasswordVerificationResult VerifyHashedPassword(ApplicationUser user, \\n\\t\\t\\t\\tstring hashedPassword, string providedPassword) \\n\\t{\\n\\t\\tstring pwdHash2 = HashPasswordInOldFormat(providedPassword);\\n\\t\\t\\n\\n\\t\\tif (hashedPassword == pwdHash2) {\\n\\t\\t\\t//first we check the hashed password with \\"old\\" hash\\n\\t\\t\\treturn PasswordVerificationResult.Success;\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\t//if old hash doesn\'t work - use the default approach \\n\\t\\t\\treturn _identityPasswordHasher.VerifyHashedPassword(user, hashedPassword, providedPassword);\\n\\t\\t}\\n\\t}\\n}\\n```\\n\\nAfter that we just need to register our new `IPasswordHasher` implementation in the DI container:\\n\\n\\n```\\n//Startup.cs\\n.   .   .   .   .   .\\npublic void ConfigureServices(IServiceCollection services)\\n{\\n    .   .   .   .   .   .\\n \\n    services.AddSingleton<IPasswordHasher<ApplicationUser>, PasswordHasherWithOldMembershipSupport>();\\n}"},{"id":"aspnet-identity-weakening-password-policies","metadata":{"permalink":"/blog/aspnet-identity-weakening-password-policies","source":"@site/blog/2018-02-10-aspnet-identity-weakening-password-policies/index.md","title":"ASP.NET Identity - Weakening password policies","description":"This is the second article in a series of articles about ASP.NET Core Identity.","date":"2018-02-10T00:00:00.000Z","formattedDate":"February 10, 2018","tags":[{"label":"ASP-NET-CORE","permalink":"/blog/tags/asp-net-core"},{"label":"ASP-NET-IDENTITY","permalink":"/blog/tags/asp-net-identity"},{"label":"PASSWORD","permalink":"/blog/tags/password"}],"readingTime":2.11,"hasTruncateMarker":true,"authors":[{"name":"Serhii Korzh","title":"Team Lead & Maintainer of EasyQuery","url":"https://github.com/korzh","imageURL":"https://github.com/korzh.png","key":"korzh"},{"name":"Oleksandr Melnychenko","title":"Maintainer of EasyQuery & Localizer","url":"https://github.com/melnalex","imageURL":"https://github.com/melnalex.png","key":"melnalex"}],"frontMatter":{"title":"ASP.NET Identity - Weakening password policies","tags":["ASP-NET-CORE","ASP-NET-IDENTITY","PASSWORD"],"authors":["korzh","melnalex"],"slug":"aspnet-identity-weakening-password-policies"},"prevItem":{"title":"ASP.NET Identity - Migrating users\' passwords from ASP.NET Membership","permalink":"/blog/aspnet-identity-migrate-membership-passwords"},"nextItem":{"title":"ASP.NET Identity - Use claims to store additional user\'s data","permalink":"/blog/aspnet-identity-store-user-data-in-claims"}},"content":"![](password-weak.jpg)\\n\\nThis is the second article in a series of articles about ASP.NET Core Identity.\\nYou can find the first one [here]({{ \'ancid05\' | internal_path }}).\\n\\n## Problem\\nLet\'s suppose you created a new ASP.NET Core with the default Authentication (like in [previous article]({{ \'blog~__rt-md5b505xps82~_aspnet-identity-store-user-data-in-claims\' | internal_path }})).\\nThen you run it and try to register a new user. On the registration form, we need to enter a password.\\nSince we need to register a user for testing purposes first of all - we don\'t want to make the password too complicated. We\'d prefer to keep it simple and easy-to-remember (in the end - it\'s not a production-mode system!)\\n\\nHowever, if you try to enter something simple like \\"qwerty\\" or your name - you will get the following bunch of error messages:\\n* Passwords must have at least one non-alphanumeric character.\\n* Passwords must have at least one digit (\'0\'-\'9\').\\n* Passwords must have at least one uppercase (\'A\'-\'Z\').\\n\\nThe reason for all these validation errors is that by default ASP.NET Core Identity has very strong password policies for the users. In the error messages above you can see the constraints which must be satisfied.\\n\\n\x3c!--truncate--\x3e\\n\\n## Solution\\nThe good news is that you can change these policies very easily, right in `Configure` method of your `Startup` class.\\n\\nAll you need to do is to use another version of `AddIdentity` method which accepts a lambda expression with `IdentityOptions` parameter.\\nSo the following default code that initializes the Identity:\\n\\n```\\nservices.AddIdentity<ApplicationUser, IdentityRole>()\\n\\t.AddEntityFrameworkStores<ApplicationDbContext>()\\n\\t.AddDefaultTokenProviders();\\n```\\n\\nshould be changed to the something like the following:\\n\\n```\\nservices.AddIdentity<ApplicationUser, IdentityRole>(options => {\\n\\toptions.Password.RequiredLength = 3;\\n\\toptions.Password.RequiredUniqueChars = 0;\\n\\toptions.Password.RequireLowercase = false;\\n\\toptions.Password.RequireUppercase = false;\\n\\toptions.Password.RequireDigit = false;\\n\\toptions.Password.RequireNonAlphanumeric = false;\\n})\\n.AddEntityFrameworkStores<ApplicationDbContext>()\\n.AddDefaultTokenProviders();\\n```\\nThe options above are self-descriptive, so no additional explanations are required.\\n\\nOf course, it\'s not good to leave such kind of password strength policies in production mode. That\'s why it will be a good idea to turn all those options off only in Development mode.\\n\\nSo, to make it possible we will need to add two more modifications to our `Startup` class:\\n\\n```\\npublic IHostingEnvironment Environment { get; }\\n\\npublic Startup(IConfiguration configuration, IHostingEnvironment env)\\n{\\n    Configuration = configuration;\\n    Environment = env;\\n}\\n\\npublic void ConfigureServices(IServiceCollection services)\\n{\\n    .     .     .     .     .     .     .\\n    services.AddIdentity<ApplicationUser, IdentityRole>(options => {\\n        if (Environment.IsDevelopment()) {\\n            options.Password.RequiredLength = 3;\\n            options.Password.RequiredUniqueChars = 0;\\n            options.Password.RequireLowercase = false;\\n            options.Password.RequireUppercase = false;\\n            options.Password.RequireDigit = false;\\n            options.Password.RequireNonAlphanumeric = false;\\n        }\\n    })\\n    .AddEntityFrameworkStores<ApplicationDbContext>()\\n    .AddDefaultTokenProviders();\\n   .     .     .     .     .     .     .\\n}\\n```"},{"id":"aspnet-identity-store-user-data-in-claims","metadata":{"permalink":"/blog/aspnet-identity-store-user-data-in-claims","source":"@site/blog/2018-01-22-ASP-NET-Identity-Use-claims-to-store-additional-users-data/index.md","title":"ASP.NET Identity - Use claims to store additional user\'s data","description":"NB: The solution presented in this article will work in version 2.0 of ASP.NET Core only!","date":"2018-01-22T00:00:00.000Z","formattedDate":"January 22, 2018","tags":[{"label":"ASP-NET-CORE","permalink":"/blog/tags/asp-net-core"},{"label":"ASP-NET-IDENTITY","permalink":"/blog/tags/asp-net-identity"},{"label":"CLAIMS","permalink":"/blog/tags/claims"}],"readingTime":4.765,"hasTruncateMarker":true,"authors":[{"name":"Serhii Korzh","title":"Team Lead & Maintainer of EasyQuery","url":"https://github.com/korzh","imageURL":"https://github.com/korzh.png","key":"korzh"},{"name":"Oleksandr Melnychenko","title":"Maintainer of EasyQuery & Localizer","url":"https://github.com/melnalex","imageURL":"https://github.com/melnalex.png","key":"melnalex"}],"frontMatter":{"title":"ASP.NET Identity - Use claims to store additional user\'s data","tags":["ASP-NET-CORE","ASP-NET-IDENTITY","CLAIMS"],"authors":["korzh","melnalex"],"slug":"aspnet-identity-store-user-data-in-claims"},"prevItem":{"title":"ASP.NET Identity - Weakening password policies","permalink":"/blog/aspnet-identity-weakening-password-policies"},"nextItem":{"title":"Welcome","permalink":"/blog/Welcome"}},"content":"![](auth-claims-01.png)\\n\\n> __NB__: The solution presented in this article will work in version 2.0 of ASP.NET Core only!    \\n> If you use a newer version of ASP.NET Core (e.g. 2.2) - here is a [new post on the same topic]({{ \'ancid05\' | internal_path}}).\\n\\n## Introduction\\nWith this post, we start a series of articles that describe the different aspects of using ASP.NET Identity in your ASP.NET (Core) applications.\\nAll the code in the following articles was built for and tested with ASP.NET Core 2.0. However, in most cases, it will work well in earlier versions of .NET framework (4.x) and ASP.NET Identity library (2.x)\\n\\nOne more note. We are NOT going to do an introduction to or describe the basic principles of ASP.NET Core in general or APS.NET Identity in particular. The following material is more for the developers who already have some experience with both of them. If you don\'t - please start by reading the tutorials on [ASP.NET Core documentation](https://docs.microsoft.com/en-us/aspnet/core/) website and creating your first web app with it.\\n\\n\x3c!--truncate--\x3e\\n\\n## Problem\\nLet\'s suppose we created a new ASP.NET Core project using one of the default templates and chose \\"Individual user account\\" option for \\"Authentication\\".\\n\\n![ASP.NET Identity new project](anc-identity-newapp01.png \\"ASP.NET Core - new project with ASP.NET Identity\\")\\n\\nNow when we start that newly created project and register new user we will see something like `Hello YourEmailAddress@YourCompany.com` in the top right part of the index web-page.\\n\\nObviously, such kind of greeting is useless in a real-world application and you would like to see the name of the currently logged user there instead (e.g. `Hello John Doe`).  \\nLet\'s figure out how to do it.\\n\\n## Solution\\nHere we guess you are already familiar with the claims and [claims-based approach](https://docs.microsoft.com/en-us/aspnet/core/security/authorization/claims) for authorization used in ASP.NET Core Identity. If not - please read [ASP.NET Core Security](https://docs.microsoft.com/en-us/aspnet/core/security/) documentation first.\\n\\nTo achieve our goal we need to do 2 things:\\n1. Add necessary information to the list of claims stored with the user\'s identity.\\n2. Have a simple way of getting that info when needed.\\n\\nBut before implementing these two tasks we will need to add a new ContactName field to our model class and update our registration and user management pages accordingly.\\n\\n### 0. Preparations: ContactName property in ApplicationUser and updated views\\nLet\'s add a new `ContactName` property to the ApplicationUser model class (you can find it in `Models` folder of your project):\\n\\n```c#\\n    public class ApplicationUser : IdentityUser {\\n        public string ContactName { get; set; }\\n    }\\n```\\nOf course, you can add here some other properties you would like to store with your user\'s account, like `FirstName`, `LastName`, `Country`, `Address`, etc. but for simplicity, we will consider only one additional property.\\n\\nThe next step will be adding a new migration and updating your database.\\nJust run the following commands from the terminal windows in your project\'s folder:\\n\\n```\\ndotnet ef migrations add ContactNameField\\n````\\nand then\\n```\\ndotnet ef database update\\n```\\n\\nFinally, we will need to add the new field to the views:\\n\\n1. `Models\\\\AccountViewModels\\\\RegisterViewModel.cs`\\n```c#\\n    public class RegisterViewModel\\n    {\\n        [Required]\\n        [Display(Name = \\"Name\\")]\\n        public string ContactName { get; set; }\\n       .     .     .     .     .     .\\n```\\n\\n2. `Views/Account/Register.chstml`\\n   Add the following piece of markup before `Email` form group\\n```html\\n            <div class=\\"form-group\\">\\n                <label asp-for=\\"ContactName\\"></label>\\n                <input asp-for=\\"ContactName\\" class=\\"form-control\\" />\\n                <span asp-validation-for=\\"ContactName\\" class=\\"text-danger\\"></span>\\n            </div>\\n````\\n\\n3. `Controllers/AccountController`\\n   Update the following line in the Register method:\\n\\n```c#\\nvar user = new ApplicationUser { ContactName=model.ContactName, UserName = model.Email, Email = model.Email };\\n```\\n\\nAfter that, perform the similar steps in\\n- `View/Manage/Index.cshtml`,\\n- `Models/ManageViewModels/IndexViewModel.cs`\\n  and in\\n- `Index` method in `ManageControler` class.\\n\\nTry to run your project and open the registration page. Now it should look this way:\\n\\n![Registration form with ContactName field](anc-identity-registration.png \\"Registration form with ContactName field\\")\\n\\nNow, when all the preparations are finished we can return back to our main tasks.\\n\\n### 1. Adding a user\'s name to the claims\\nIt appears that the main task is much easier than all the preparations we made before. :)\\n\\nThe quickest way to add some additional claims to the user\'s identity is to create your own implementation of `IUserClaimsPrincipalFactory` and register it in DI container.\\n\\nHere is the implementation of `IUserClaimsPrincipalFactory` which adds the value stored in `ContactName` property to the user\'s claims:\\n\\n```c#\\n    public class MyUserClaimsPrincipalFactory : UserClaimsPrincipalFactory<ApplicationUser, IdentityRole>\\n    {\\n        public MyUserClaimsPrincipalFactory(\\n            UserManager<ApplicationUser> userManager,\\n            RoleManager<IdentityRole> roleManager,\\n            IOptions<IdentityOptions> optionsAccessor)\\n            : base(userManager, roleManager, optionsAccessor) {\\n        }\\n\\n        protected override async Task<ClaimsIdentity> GenerateClaimsAsync(ApplicationUser user) {\\n            var identity = await base.GenerateClaimsAsync(user);\\n            identity.AddClaim(new Claim(\\"ContactName\\", user.ContactName ?? \\"\\"));\\n            return identity;\\n        }\\n    } \\n```\\n\\nAnd then register it in DI container in `ConfigureServices` methods of your Startup class:\\n\\n```c#\\npublic void ConfigureServices(IServiceCollection services) {\\n    .     .     .     .      . \\n    services.AddIdentity<ApplicationUser, IdentityRole>()\\n        .AddEntityFrameworkStores<ApplicationDbContext>()\\n        .AddDefaultTokenProviders();\\n     \\n    //add the following line of code\\n    services.AddScoped<IUserClaimsPrincipalFactory<ApplicationUser>, MyUserClaimsPrincipalFactory>();\\n    .     .     .     .      . \\n} \\n```\\n\\n### 2. Accessing new claim from the views\\nNow we have a new claim associated with our user\'s identity. That\'s fine. But how we can get it and render on our view(s)?\\nEasy. Any view in your application has access to `User` object which is an instance of `ClaimsPrincipal` class.\\n\\nThis object actually holds the list of all claims associated with the current user and you can call its `FindFirst` method to get the necessary claim and then read the `Value` property of the found claim.\\n\\nSo, we just need to open `_LoginPartical.cshtml` file in `Views/Shared/` folder and replace the following line:\\n\\n```html\\n    <a asp-area=\\"\\" asp-controller=\\"Manage\\" asp-action=\\"Index\\" title=\\"Manage\\">Hello @UserManager.GetUserName(User)!</a>\\n```\\nwith this one:\\n\\n```html\\n    <a asp-area=\\"\\" asp-controller=\\"Manage\\" asp-action=\\"Index\\" title=\\"Manage\\">Hello @(User.FindFirst(\\"ContactName\\").Value)!</a>\\n```\\nNow you instead of something like `Hello john.doe@yourcompany.com` at the top of your web-page you should see something like this:\\n\\n![ASP.NET Identity contact name](anc-identity-contact-name.png \\"ASP.NET Core - renderring contact name instead of user\'s ID\\")"},{"id":"Welcome","metadata":{"permalink":"/blog/Welcome","source":"@site/blog/2018-01-01-welcome.md","title":"Welcome","description":"","date":"2018-01-01T00:00:00.000Z","formattedDate":"January 1, 2018","tags":[],"readingTime":0,"hasTruncateMarker":false,"authors":[{"name":"Serhii Korzh","title":"Team Lead & Maintainer of EasyQuery","url":"https://github.com/korzh","imageURL":"https://github.com/korzh.png","key":"korzh"},{"name":"Oleksandr Melnychenko","title":"Maintainer of EasyQuery & Localizer","url":"https://github.com/melnalex","imageURL":"https://github.com/melnalex.png","key":"melnalex"},{"name":"Serhii Pimenov","title":"Maintainer of Metro UI","url":"https://github.com/olton","imageURL":"https://github.com/olton.png","key":"olton"}],"frontMatter":{"title":"Welcome","slug":"Welcome","authors":["korzh","melnalex","olton"]},"prevItem":{"title":"ASP.NET Identity - Use claims to store additional user\'s data","permalink":"/blog/aspnet-identity-store-user-data-in-claims"}},"content":""}]}')}}]);